(this["webpackJsonpquick-hit"] = this["webpackJsonpquick-hit"] || []).push([[0],{

/***/ 507:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 509:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 513:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 514:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 521:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 545:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 546:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 547:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 549:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 550:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 551:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 554:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 556:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 557:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 558:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 559:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 693:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 694:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 695:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),

/***/ 696:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(0);
var react_default = /*#__PURE__*/__webpack_require__.n(react);

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(99);
var react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);

// EXTERNAL MODULE: ./src/index.css
var src = __webpack_require__(507);

// EXTERNAL MODULE: ./node_modules/semantic-ui-css/semantic.min.css
var semantic_min = __webpack_require__(508);

// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js
var react_router_dom = __webpack_require__(82);

// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js
var react_router = __webpack_require__(64);

// EXTERNAL MODULE: ./src/App.css
var App = __webpack_require__(509);

// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 23 modules
var es = __webpack_require__(53);

// EXTERNAL MODULE: ./src/components/Home/Home.css
var Home = __webpack_require__(513);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Transition/Transition.js
var Transition = __webpack_require__(449);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Header/Header.js
var Header = __webpack_require__(756);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Icon/Icon.js
var Icon = __webpack_require__(77);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Button/ButtonGroup.js
var ButtonGroup = __webpack_require__(302);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js
var Segment = __webpack_require__(387);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js
var Button = __webpack_require__(161);

// CONCATENATED MODULE: ./src/redux/constants/TTConstants/index.ts
var SET_MATCHES="SET_MATCHES";var SET_PLAYERS="SET_PLAYERS";var SET_LOADING="SET_LOADING";var SET_FORCE_REFRESH="SET_FORCE_REFRESH";var SET_HAPPY_HOUR="SET_HAPPY_HOUR";var SET_BADGES="SET_BADGES";var SET_TOURNAMENTS="SET_TOURNAMENTS";
// CONCATENATED MODULE: ./src/redux/actions/TTActions/index.ts
function TTActions_setMatches(newMatches){return{type:SET_MATCHES,value:newMatches};}function TTActions_setPlayers(newPlayers){return{type:SET_PLAYERS,value:newPlayers};}function TTActions_setLoading(newLoading){return{type:SET_LOADING,value:newLoading};}function setRefresh(newRefresh){return{type:SET_FORCE_REFRESH,value:newRefresh};}function TTActions_setHappyHour(newHappyHour){return{type:SET_HAPPY_HOUR,value:newHappyHour};}function TTActions_setBadges(newBadges){return{type:SET_BADGES,value:newBadges};}function TTActions_setTournaments(newTournaments){return{type:SET_TOURNAMENTS,value:newTournaments};}
// CONCATENATED MODULE: ./src/containers/shared/index.ts
function mapTTDataToProps(store){return{loading:store.ttData.loading,players:store.ttData.players,matches:store.ttData.matches,happyHour:store.ttData.happyHour,badges:store.ttData.badges,tournaments:store.ttData.tournaments,refresh:store.ttData.refresh,chosenInstance:store.authStore.chosenInstance};}function mapTTDispatchToProps(dispatch){return{setForceRefresh:function setForceRefresh(newRefresh){return dispatch(setRefresh(newRefresh));}};}
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 1 modules
var slicedToArray = __webpack_require__(14);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Modal/Modal.js + 1 modules
var Modal = __webpack_require__(769);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Form/Form.js
var Form = __webpack_require__(752);

// EXTERNAL MODULE: ./src/components/NewGame/NewGame.css
var NewGame = __webpack_require__(514);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(40);

// EXTERNAL MODULE: ./node_modules/react-semantic-toasts-extended/build/index.js
var build = __webpack_require__(280);

// EXTERNAL MODULE: ./src/components/Toast/Toast.css
var Toast = __webpack_require__(521);

// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(3);

// CONCATENATED MODULE: ./src/components/Toast/Toast.tsx
var TOAST_DEFAULT_OPTS={animation:"bounce",time:30000};/**
 * QuickHit Toast
 */function Toaster(){return/*#__PURE__*/Object(jsx_runtime["jsx"])(build["SemanticToastContainer"],{position:"bottom-center",className:"quick-hit-toasts",maxToasts:2});}var Toast_makeSuccessToast=function makeSuccessToast(title,message){Object(build["toast"])(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},TOAST_DEFAULT_OPTS),{},{title:title,description:message,type:"success",icon:"checkmark"}));};var Toast_makeErrorToast=function makeErrorToast(title,message){Object(build["toast"])(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},TOAST_DEFAULT_OPTS),{},{title:title,description:message,type:"error",icon:"warning"}));};var Toast_makeRefreshToast=function makeRefreshToast(){Object(build["toast"])({time:0,title:"New matches have been added",description:"Please refresh the application.",type:"error",icon:"warning"});};/* harmony default export */ var Toast_Toast = (Toaster);
// EXTERNAL MODULE: ./node_modules/elo-rank/index.js
var elo_rank = __webpack_require__(454);
var elo_rank_default = /*#__PURE__*/__webpack_require__.n(elo_rank);

// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules
var v4 = __webpack_require__(768);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(1);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(5);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(2);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(4);

// CONCATENATED MODULE: ./src/types/database/models.ts
function getTodaysDate(){// yyyy-mm-dd
return new Date().toLocaleDateString().replace(/\//g,"-");}
// CONCATENATED MODULE: ./src/api/ApiTypes.ts
var HttpMethod;(function(HttpMethod){HttpMethod["GET"]="get";HttpMethod["POST"]="post";HttpMethod["PUT"]="put";HttpMethod["PATCH"]="patch";})(HttpMethod||(HttpMethod={}));var ApiActions;(function(ApiActions){ApiActions["INSTANCES"]="instances.json";ApiActions["PLAYERS"]="player.json";ApiActions["MATCHES"]="match.json";ApiActions["HAPPY_HOUR"]="happyhour.json";ApiActions["BADGE"]="badge.json";ApiActions["TOURNAMENT"]="tournament.json";ApiActions["CHAT"]="chat.json";})(ApiActions||(ApiActions={}));
// EXTERNAL MODULE: ./node_modules/axios/index.js
var axios = __webpack_require__(282);
var axios_default = /*#__PURE__*/__webpack_require__.n(axios);

// EXTERNAL MODULE: ./node_modules/redux/es/redux.js + 2 modules
var redux = __webpack_require__(167);

// CONCATENATED MODULE: ./src/redux/reducers/TTReducer/index.ts
var dataInitialState={players:[],matches:[],loading:true,happyHour:{date:"",hourStart:0,multiplier:0},badges:[],tournaments:[],refresh:false};function ttReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:dataInitialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_MATCHES:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{matches:action.value});case SET_PLAYERS:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{players:action.value});case SET_LOADING:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{loading:action.value});case SET_FORCE_REFRESH:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{refresh:action.value});case SET_HAPPY_HOUR:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{happyHour:action.value});case SET_BADGES:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{badges:action.value});case SET_TOURNAMENTS:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{tournaments:action.value});default:return state;}}
// CONCATENATED MODULE: ./src/redux/constants/ViewConstants/index.ts
var SET_HIDE_ZERO_GAME_PLAYERS="SET_HIDE_ZERO_GAME_PLAYERS";var SET_SHOW_CARDS="SET_SHOW_CARDS";var SET_DISABLE_MUSIC="SET_DISABLE_MUSIC";var SET_USERNAME="SET_USERNAME";var SET_DARK_MODE="SET_DARK_MODE";
// CONCATENATED MODULE: ./src/redux/reducers/ViewReducer/index.ts
var viewInitialState={hideZeroGamePlayers:true,showCards:false,disableMusic:false,username:"Anonymous",darkMode:false};function viewReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:viewInitialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_HIDE_ZERO_GAME_PLAYERS:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{hideZeroGamePlayers:action.value});case SET_SHOW_CARDS:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{showCards:action.value});case SET_DISABLE_MUSIC:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{disableMusic:action.value});case SET_USERNAME:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{username:action.value});case SET_DARK_MODE:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{darkMode:action.value});default:return state;}}
// CONCATENATED MODULE: ./src/redux/constants/AuthConstants/index.ts
var SET_AUTH_KEY="SET_AUTH_KEY";var SET_AUTH_DETAIL="SET_AUTH_DETAIL";var SET_INSTANCE="SET_INSTANCE";
// CONCATENATED MODULE: ./src/redux/reducers/AuthReducer/index.ts
var authInitialState={authKey:undefined,authDetail:undefined};function authReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:authInitialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_AUTH_KEY:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{authKey:action.value});case SET_AUTH_DETAIL:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{authDetail:action.value});case SET_INSTANCE:return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{chosenInstance:action.value});default:return state;}}
// EXTERNAL MODULE: ./node_modules/redux-persist/lib/storage/index.js
var storage = __webpack_require__(388);
var storage_default = /*#__PURE__*/__webpack_require__.n(storage);

// EXTERNAL MODULE: ./node_modules/redux-persist/es/index.js + 9 modules
var redux_persist_es = __webpack_require__(393);

// CONCATENATED MODULE: ./src/redux/types/store.ts
// Redux-persistor config.
var persistConfig={key:"root",storage:storage_default.a,// We do not want to store the tt data in persist - as it should reload anew on each application refresh.
blacklist:["ttData","authStore"]};var authConfig={key:"authStore",storage:storage_default.a};var reducers=Object(redux["a" /* combineReducers */])({viewStore:viewReducer,ttData:ttReducer,authStore:Object(redux_persist_es["a" /* persistReducer */])(authConfig,authReducer)});var store=Object(redux["b" /* createStore */])(Object(redux_persist_es["a" /* persistReducer */])(persistConfig,reducers),{ttData:dataInitialState,viewStore:viewInitialState,authStore:authInitialState});/* harmony default export */ var types_store = (store);
// CONCATENATED MODULE: ./src/redux/actions/AuthActions/index.ts
function AuthActions_setChosenInstance(newChosenInstance){return{type:SET_INSTANCE,value:newChosenInstance};}function AuthActions_setAuthKey(newKey){return{type:SET_AUTH_KEY,value:newKey};}function AuthActions_setAuthDetail(newAuthDetail){return{type:SET_AUTH_DETAIL,value:newAuthDetail};}
// EXTERNAL MODULE: ./node_modules/react-ga/dist/esm/index.js + 12 modules
var esm = __webpack_require__(210);

// CONCATENATED MODULE: ./src/api/QuickHitAPI.ts
var FB_CATALOGUE_URL="https://quickhit-instances-default-rtdb.asia-southeast1.firebasedatabase.app/";var QuickHitAPI_QuickHitAPI=/*#__PURE__*/function(){function QuickHitAPI(){Object(classCallCheck["a" /* default */])(this,QuickHitAPI);}Object(createClass["a" /* default */])(QuickHitAPI,null,[{key:"getInstances",value:function getInstances(onSuccess,onFailure){axios_default()({method:HttpMethod.GET,baseURL:FB_CATALOGUE_URL,url:ApiActions.INSTANCES,headers:{"Content-Type":"application/json"}}).then(function(response){onSuccess(Object.values(response.data));}).catch(function(error){onFailure(error.message);});}},{key:"getPlayers",value:function getPlayers(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.PLAYERS,HttpMethod.GET).then(function(response){onSuccess(Object.values(response.data));}).catch(function(error){onFailure(error.message);});}},{key:"getMatches",value:function getMatches(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.MATCHES,HttpMethod.GET).then(function(response){onSuccess(Object.values(response.data));}).catch(function(error){onFailure(error.message);});}},{key:"getBadges",value:function getBadges(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.BADGE,HttpMethod.GET).then(function(response){onSuccess(Object.values(response.data));}).catch(function(error){onFailure(error.message);});}},{key:"getTournaments",value:function getTournaments(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.TOURNAMENT,HttpMethod.GET).then(function(response){onSuccess(response.data?Object.values(response.data):[]);}).catch(function(error){onFailure(error.message);});}},{key:"addBadge",value:function addBadge(badgeToAdd,onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.BADGE,HttpMethod.PATCH,"{\"".concat(badgeToAdd.id,"\" : ").concat(JSON.stringify(badgeToAdd),"}")).then(function(){onSuccess();}).catch(function(error){onFailure(error.message);});}},{key:"addOrUpdatePlayer",value:function addOrUpdatePlayer(playerToAdd,onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.PLAYERS,HttpMethod.PATCH,"{\"".concat(playerToAdd.id,"\" : ").concat(JSON.stringify(playerToAdd),"}")).then(function(){onSuccess();}).catch(function(error){onFailure(error.message);});}},{key:"getTodaysHappyHour",value:function getTodaysHappyHour(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest("".concat(ApiActions.HAPPY_HOUR,"?orderBy=\"$key\"&startAt=\"").concat(getTodaysDate(),"\"&"),HttpMethod.GET).then(function(response){onSuccess(response.data[getTodaysDate()]);}).catch(function(error){onFailure(error.message);});}},{key:"setHappyHour",value:function setHappyHour(happyHour,onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.HAPPY_HOUR,HttpMethod.PATCH,"{\"".concat(happyHour.date,"\" : ").concat(JSON.stringify(happyHour),"}")).then(function(){onSuccess();}).catch(function(error){onFailure(error.message);});}},{key:"getTodaysChatRoom",value:function getTodaysChatRoom(onSuccess,onFailure){QuickHitAPI.makeAxiosRequest("".concat(ApiActions.CHAT,"?orderBy=\"$key\"&startAt=\"").concat(getTodaysDate(),"\"&"),HttpMethod.GET).then(function(response){onSuccess(response.data[getTodaysDate()]);}).catch(function(error){onFailure(error.message);});}},{key:"setChatRoom",value:function setChatRoom(chatRoom,onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.CHAT,HttpMethod.PATCH,"{\"".concat(chatRoom.date,"\" : ").concat(JSON.stringify(chatRoom),"}")).then(function(){onSuccess();}).catch(function(error){onFailure(error.message);});}},{key:"addNewMatch",value:function addNewMatch(matchToAdd,winningPlayer,losingPlayer,onSuccess,onFailure){var _this=this;QuickHitAPI.makeAxiosRequest(ApiActions.MATCHES,HttpMethod.PATCH,"{\"".concat(matchToAdd.id,"\" : ").concat(JSON.stringify(matchToAdd),"}")).then(function(){_this.addOrUpdatePlayer(winningPlayer,function(){return;},onFailure);_this.addOrUpdatePlayer(losingPlayer,function(){return;},onFailure);onSuccess();}).catch(function(error){onFailure(error.message);});}},{key:"addUpdateTournament",value:function addUpdateTournament(tournamentToAdd,onSuccess,onFailure){QuickHitAPI.makeAxiosRequest(ApiActions.TOURNAMENT,HttpMethod.PATCH,"{\"".concat(tournamentToAdd.id,"\" : ").concat(JSON.stringify(tournamentToAdd),"}")).then(function(){return onSuccess();}).catch(function(error){return onFailure(error.message);});}},{key:"makeAxiosRequest",value:function makeAxiosRequest(uri,method,data){var chosenInstance=types_store.getState().authStore.chosenInstance;if(!chosenInstance){return Promise.reject({message:"Must select an instance to proceed!"});}return this.authenticateToFirebase(chosenInstance).then(function(token){var _authDetail$userName,_authDetail$email;var authDetail=types_store.getState().authStore.authDetail;esm["a" /* default */].event({category:"Request",action:"Authenticated user ".concat((_authDetail$userName=authDetail.userName)!==null&&_authDetail$userName!==void 0?_authDetail$userName:"unknown"," (").concat((_authDetail$email=authDetail.email)!==null&&_authDetail$email!==void 0?_authDetail$email:"unknown",") has made ").concat(method," request to ").concat(uri," with data: ").concat(data!==null&&data!==void 0?data:"no data")});return axios_default()({method:method,baseURL:chosenInstance.fb_url,url:"".concat(uri,"?auth=").concat(token).replaceAll("&?","&"),data:data,headers:{"Content-Type":"application/json"}});});}},{key:"authenticateToFirebase",value:function(){var _authenticateToFirebase=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(chosenInstance){var getToken;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getToken=function getToken(){// Check Redux store for existing token
var authDetail=types_store.getState().authStore.authDetail;if(!chosenInstance.google_auth){// If there is an auth and it has expired...
if(authDetail&&Date.now()>=new Date(authDetail.expiryTime).getTime()){console.log("Updating token...");return axios_default()({method:HttpMethod.POST,baseURL:"https://securetoken.googleapis.com/v1/token?key=".concat(chosenInstance.fb_api_key),data:{grant_type:"refresh_token",refresh_token:authDetail.refreshToken},headers:{"Content-Type":"application/json"}}).then(function(response){var token=response.data.id_token;var refreshToken=response.data.refresh_token;var uid=response.data.user_id;var expiryDate=new Date(Date.now()+response.data.expires_in*1000).toUTCString();types_store.dispatch(AuthActions_setAuthDetail({idToken:token,userName:uid,refreshToken:refreshToken,expiryTime:expiryDate}));return new Promise(function(resolve){resolve(token);});});}// If there wasn't one, and we're not using Google Auth, get a new one and set it.
else{return axios_default()({method:HttpMethod.POST,baseURL:"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(chosenInstance.fb_api_key),data:{email:chosenInstance.fb_srv_acc_name,password:types_store.getState().authStore.authKey,returnSecureToken:true},headers:{"Content-Type":"application/json"}}).then(function(response){var token=response.data.idToken;var refreshToken=response.data.refreshToken;var uid=response.data.localId;var email=response.data.email;var expiryDate=new Date(Date.now()+response.data.expiresIn*1000).toUTCString();types_store.dispatch(AuthActions_setAuthDetail({idToken:token,userName:uid,email:email,refreshToken:refreshToken,expiryTime:expiryDate}));return new Promise(function(resolve){resolve(token);});});}}// TODO refresh Google auth?
return new Promise(function(resolve){resolve(authDetail.idToken);});};return _context.abrupt("return",getToken());case 2:case"end":return _context.stop();}}},_callee);}));function authenticateToFirebase(_x){return _authenticateToFirebase.apply(this,arguments);}return authenticateToFirebase;}()}]);return QuickHitAPI;}();
// CONCATENATED MODULE: ./src/components/Achievements/Achievements.ts
var Achievement;(function(Achievement){Achievement["FATALITY"]="fatality";Achievement["CLUTCH_PERFORMER"]="clutch_performer";Achievement["HEART_BREAKER"]="heart_breaker";Achievement["ON_A_ROLL"]="on_a_roll";Achievement["UNSTOPPABLE"]="unstoppable";Achievement["ASCENDED"]="ascended";Achievement["HELPLESS"]="helpless";Achievement["SUPERIOR"]="superior";Achievement["CELLAR_DWELLAR"]="cellar_dwellar";Achievement["A_LITTLE_EMBARRASSING"]="a_little_embarrassing";Achievement["SHOULD_HAVE_PUT_MONEY_ON_IT"]="should_have_put_money_on_it";})(Achievement||(Achievement={}));var FATALITY_BADGE={icon:"tint",key:Achievement.FATALITY,text:"Win a game to 11 or more without losing a single point",title:"FATALITY!"};var CLUTCH_PERFORMER_BADGE={icon:"hand victory",key:Achievement.CLUTCH_PERFORMER,text:"Win 5 games by 2 points or less",title:"Clutch Performer"};var HEART_BREAKER_BADGE={icon:"heartbeat",key:Achievement.HEART_BREAKER,text:"Lose 5 games by 2 points or less",title:"Heart Breaker"};var ON_A_ROLL_BADGE={icon:"smile",key:Achievement.ON_A_ROLL,text:"Win 3 games in a row",title:"On A Roll"};var ASCENDED_BADGE={icon:"cloudversify",key:Achievement.ASCENDED,text:"Win 10 games in a row",title:"Ascended"};var UNSTOPPABLE_BADGE={icon:"ship",key:Achievement.UNSTOPPABLE,text:"Win 5 games in a row",title:"Unstoppable"};var HELPLESS_BADGE={icon:"bed",key:Achievement.HELPLESS,text:"Lose a game to 11 or more without winning a point",title:"Helpless"};var SUPERIOR_BADGE={icon:"chess king",key:Achievement.SUPERIOR,text:"Reach 1300 ELO",title:"Superior"};var CELLAR_DWELLAR_BADGE={icon:"spoon",key:Achievement.CELLAR_DWELLAR,text:"Fall to 1100 ELO",title:"Cellar Dwellar"};var A_LITTLE_EMBARRASSING_BADGE={icon:"frown",key:Achievement.A_LITTLE_EMBARRASSING,text:"Lose to a player with an ELO of 200+ less than you",title:"A Little Embarrassing"};var SHOULD_HAVE_PUT_MONEY_ON_IT_BADGE={icon:"money",key:Achievement.SHOULD_HAVE_PUT_MONEY_ON_IT,text:"Win against a player with an ELO of 200+ more than you",title:"Should Have Put Money On It"};
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js
var createForOfIteratorHelper = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Loader/Loader.js
var Loader = __webpack_require__(757);

// CONCATENATED MODULE: ./src/components/QHDataLoader/QHDataLoader.tsx
// Since the Firebase DB is not an RDBS, and free tier - it is better to preload the contents of the DB and draw
// associations between IDs on the clientside rather than on the serverside.
// Can do an initial fetch and cache the data in Redux - or fetch on every page change for a more responsive
// experience.
// How frequently to poll the Firebase DB for new data.
var POLL_TIME_MS=30000;function QHDataLoader(props){var intervalRef=Object(react["useRef"])();var _useState=Object(react["useState"])(true),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),polling=_useState2[0],setPolling=_useState2[1];var getHappyHourOrSetIfNotPresent=function getHappyHourOrSetIfNotPresent(){var onFailure=function onFailure(error){Toast_makeErrorToast("Could not determine today's happy hour",error);props.setLoading(false);};var onSuccess=function onSuccess(happyHour){if(happyHour===null||happyHour===void 0?void 0:happyHour.date){props.setHappyHour(happyHour);}else{var _props$chosenInstance;// No happy hour generated for today, generate one
var newHappyHour={date:getTodaysDate(),// If happy hour is restricted, force set the happy hour to either be 12 or 16 (lunch time or 4pm).
hourStart:((_props$chosenInstance=props.chosenInstance)===null||_props$chosenInstance===void 0?void 0:_props$chosenInstance.restricted_happy_hour)?randomIntFromInterval(0,1)===0?12:16:randomIntFromInterval(9,19),multiplier:randomIntFromInterval(2,6)};QuickHitAPI_QuickHitAPI.setHappyHour(newHappyHour,function(){props.setHappyHour(newHappyHour);return;},onFailure);}};QuickHitAPI_QuickHitAPI.getTodaysHappyHour(onSuccess,onFailure);};var getMatches=function getMatches(){var onSuccess=function onSuccess(receivedMatches){// Check for match data changes, and alert the user to manually refresh when they return, unless it was an
// expected/forced refresh.
if(!props.refresh&&receivedMatches.length!==props.matches.length&&props.matches.length>0){// Match data has changed, prompt user for a refresh.
Toast_makeRefreshToast();// Stop checking for new data.
setPolling(false);// FIXME sets loading indefinitely to prevent actions and force a refresh.
props.setLoading(true);}else{props.setLoading(false);// Sort matches by date (newest to oldest)
receivedMatches.sort(function(a,b){return new Date(b.date).getTime()-new Date(a.date).getTime();});props.setMatches(receivedMatches);}};var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get matches",error);props.setLoading(false);};QuickHitAPI_QuickHitAPI.getMatches(onSuccess,onFailure);};var getPlayers=function getPlayers(){var onSuccess=function onSuccess(players){props.setPlayers(players);};var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get players",error);props.setLoading(false);};QuickHitAPI_QuickHitAPI.getPlayers(onSuccess,onFailure);};var getBadges=function getBadges(){var onSuccess=function onSuccess(badges){props.setBadges(badges);};var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get badges",error);props.setLoading(false);};QuickHitAPI_QuickHitAPI.getBadges(onSuccess,onFailure);};var getTournaments=function getTournaments(){var onSuccess=function onSuccess(tournaments){props.setTournaments(tournaments);};var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get tournaments",error);props.setLoading(false);};QuickHitAPI_QuickHitAPI.getTournaments(onSuccess,onFailure);};var getData=function getData(){getHappyHourOrSetIfNotPresent();getBadges();getMatches();getTournaments();getPlayers();};Object(react["useEffect"])(function(){if(intervalRef.current){props.setLoading(false);}},[props.players,props.matches,props.badges,props.happyHour]);// On component mount.
Object(react["useEffect"])(function(){getData();},[]);// Set the data loop, and on prop change, reset the loop as the Interval function will retain the props
// present at the time of invocation.
Object(react["useEffect"])(function(){if(intervalRef.current){clearInterval(intervalRef.current);}if(polling){intervalRef.current=setInterval(getData,POLL_TIME_MS);}// If we were forced to refresh
if(props.refresh){getData();props.setForceRefresh(false);}},[props,polling]);return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"data-loader",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:props.loading,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Loader["a" /* default */],{content:"Loading data..."})})});}var getWinLossForPlayer=function getWinLossForPlayer(playerId,matches){var winLoss={wins:0,losses:0,formGuide:""};matches.forEach(function(match){if(match.winning_player_id===playerId){winLoss.wins++;winLoss.formGuide+="W";}else if(match.losing_player_id===playerId){winLoss.losses++;winLoss.formGuide+="L";}});return winLoss;};var getRecordAgainstPlayer=function getRecordAgainstPlayer(playerId,opponentId,matches){var wins=0;var losses=0;var formGuide="";matches.forEach(function(match){if(match.winning_player_id===playerId&&match.losing_player_id===opponentId){++wins;formGuide+="W";}else if(match.losing_player_id===playerId&&match.winning_player_id===opponentId){++losses;formGuide+="L";}});return{wins:wins,losses:losses,formGuide:formGuide};};var getGraphStatsForPlayer=function getGraphStatsForPlayer(playerId,matches,players){var eloGraphStats=[];var playersMap=getPlayersMap(players);// Build up array of all matches, plus their resulting ELO for the player id given.
for(var i=0;i<matches.length;i++){var match=matches[i];// Ensure the player was in this match
if(match.winning_player_id===playerId||match.losing_player_id===playerId){var won=playerId===match.winning_player_id;var ELO=won?match.winner_new_elo:match.loser_new_elo;var date=new Date(match.date);var matchStr=void 0;if(won){var _playersMap$get;matchStr="W (".concat(match.winning_player_score,"-").concat(match.losing_player_score,") vs ").concat((_playersMap$get=playersMap.get(match.losing_player_id))===null||_playersMap$get===void 0?void 0:_playersMap$get.name);}else{var _playersMap$get2;matchStr="L (".concat(match.losing_player_score,"-").concat(match.winning_player_score,") vs ").concat((_playersMap$get2=playersMap.get(match.winning_player_id))===null||_playersMap$get2===void 0?void 0:_playersMap$get2.name);}var eloGraphStatsEntry={ELO:ELO,date:date,matchStr:matchStr};eloGraphStats.push(eloGraphStatsEntry);}}// Sort the results by date.
eloGraphStats.sort(function(a,b){return a.date.getTime()-b.date.getTime();});return eloGraphStats;};var QHDataLoader_getExtraPlayerStats=function getExtraPlayerStats(playerId,matches){var minELO=1200;var maxELO=1200;var wins=0;var losses=0;var formGuide="";var winsMap=new Map();var lossesMap=new Map();var victim=undefined;var nemesis=undefined;matches.forEach(function(match){if(match.winning_player_id===playerId){++wins;formGuide+="W";if(match.winning_player_original_elo<minELO){minELO=match.winning_player_original_elo;}if(match.winner_new_elo>maxELO){maxELO=match.winner_new_elo;}if(winsMap.has(match.losing_player_id)){// Have to use a non-null assertion here because the compiler apparently isn't smart enough to realise that
// if the map has the key, a get call for the key won't be undefined.
// eslint-disable-next-line
winsMap.set(match.losing_player_id,winsMap.get(match.losing_player_id)+1);}else{winsMap.set(match.losing_player_id,1);}}else if(match.losing_player_id===playerId){++losses;formGuide+="L";if(match.loser_new_elo<minELO){minELO=match.loser_new_elo;}if(match.losing_player_original_elo>maxELO){maxELO=match.losing_player_original_elo;}if(lossesMap.has(match.winning_player_id)){// Same here with the non-null assertion.
// eslint-disable-next-line
lossesMap.set(match.winning_player_id,lossesMap.get(match.winning_player_id)+1);}else{lossesMap.set(match.winning_player_id,1);}}});if(wins>0){var maxWins=0;var _iterator=Object(createForOfIteratorHelper["a" /* default */])(winsMap),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=Object(slicedToArray["a" /* default */])(_step.value,2),player=_step$value[0],_wins=_step$value[1];if(_wins>maxWins){victim=player;maxWins=_wins;}else if(_wins===maxWins){if(victim){// Get the first player alphabetically, because we can't guarantee map iteration order.
var alphabeticalResult=victim.localeCompare(player);if(alphabeticalResult===1){victim=player;}}else{victim=player;}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}if(losses>0){var maxLosses=0;var _iterator2=Object(createForOfIteratorHelper["a" /* default */])(lossesMap),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=Object(slicedToArray["a" /* default */])(_step2.value,2),_player=_step2$value[0],_losses=_step2$value[1];if(_losses>maxLosses){nemesis=_player;maxLosses=_losses;}else if(_losses===maxLosses){if(nemesis){// Get the first player alphabetically, because we can't guarantee map iteration order.
var _alphabeticalResult=nemesis.localeCompare(_player);if(_alphabeticalResult===1){nemesis=_player;}}else{nemesis=_player;}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return{wins:wins,losses:losses,formGuide:formGuide,minELO:minELO,maxELO:maxELO,victim:victim,nemesis:nemesis};};var getPlayersMap=function getPlayersMap(players){var playersMap=new Map();if(players){players.forEach(function(player){playersMap.set(player.id,player);});}return playersMap;};var randomIntFromInterval=function randomIntFromInterval(min,max){return Math.floor(Math.random()*(max-min+1)+min);};/* harmony default export */ var QHDataLoader_QHDataLoader = (QHDataLoader);
// CONCATENATED MODULE: ./src/components/Achievements/AchievementChecker.ts
var BADGE_CHECK_MAP=new Map([[FATALITY_BADGE,function(matches,player){return checkForFatality(matches,player);}],[CLUTCH_PERFORMER_BADGE,function(matches,player){return checkForClutchPerformer(matches,player);}],[HEART_BREAKER_BADGE,function(matches,player){return checkForHeartBreaker(matches,player);}],[ON_A_ROLL_BADGE,function(matches,player){return checkForWinsInARow(matches,player,3);}],[UNSTOPPABLE_BADGE,function(matches,player){return checkForWinsInARow(matches,player,5);}],[ASCENDED_BADGE,function(matches,player){return checkForWinsInARow(matches,player,10);}],[HELPLESS_BADGE,function(matches,player){return checkForHelpless(matches,player);}],[SUPERIOR_BADGE,function(matches,player){return checkForSuperior(matches,player);}],[CELLAR_DWELLAR_BADGE,function(matches,player){return checkForCellarDwellar(matches,player);}],[A_LITTLE_EMBARRASSING_BADGE,function(matches,player){return checkForALittleEmbarrassing(matches,player);}],[SHOULD_HAVE_PUT_MONEY_ON_IT_BADGE,function(matches,player){return checkForShouldHavePutMoneyOnIt(matches,player);}]]);var checkForClutchPerformer=function checkForClutchPerformer(matches,player){// Filter only to be the matches where the winner is this player
var matchesInvolvingPlayerAsWinner=matches.filter(function(match){return match.winning_player_id===player.id;});var matchesThatWereWonBy2PointsOrLess=matchesInvolvingPlayerAsWinner.filter(function(match){return match.winning_player_score-match.losing_player_score<=2;});// If the player has won 5 or more games by 2 points or less, they earn this achievement.
return matchesThatWereWonBy2PointsOrLess.length>=5?matchesThatWereWonBy2PointsOrLess[0].losing_player_id:"";};var checkForHeartBreaker=function checkForHeartBreaker(matches,player){// Filter only to be the matches where the loser is this player
var matchesInvolvingPlayerAsLoser=matches.filter(function(match){return match.losing_player_id===player.id;});var matchesThatWereLostBy2PointsOrLess=matchesInvolvingPlayerAsLoser.filter(function(match){return match.winning_player_score-match.losing_player_score<=2;});// If the player has lost 5 or more games by 2 points or less, ya blew it schmuck! They earn this achievement.
return matchesThatWereLostBy2PointsOrLess.length>=5?matchesThatWereLostBy2PointsOrLess[0].winning_player_id:"";};var checkForWinsInARow=function checkForWinsInARow(matches,player,count){var matchesInvolvingPlayer=matches.filter(function(match){return match.winning_player_id===player.id||match.losing_player_id===player.id;}).sort(function(match1,match2){return match1.date.localeCompare(match2.date);});var streak=0;var lastMatchPlayer="";matchesInvolvingPlayer.forEach(function(match){if(match.winning_player_id===player.id){streak+=1;}else{streak=0;}// If the player has won enough games in a row, award this achievement.
if(streak>=count){lastMatchPlayer=match.losing_player_id;return;}});return lastMatchPlayer;};var checkForFatality=function checkForFatality(matches,player){// Filter only to be the matches where the winner is this player
var matchesInvolvingPlayerAsWinner=matches.filter(function(match){return match.winning_player_id===player.id;});var matchesWonWithoutLosingAPoint=matchesInvolvingPlayerAsWinner.filter(function(match){return match.losing_player_score===0&&match.winning_player_score>=11;});// If they have any matches won without losing a point, award achievement.
return matchesWonWithoutLosingAPoint.length>0?matchesWonWithoutLosingAPoint[0].losing_player_id:"";};var checkForHelpless=function checkForHelpless(matches,player){// Filter only to be the matches where the loser is this player
var matchesInvolvingPlayerAsLoser=matches.filter(function(match){return match.losing_player_id===player.id;});var matchesLostWithoutEarningAPoint=matchesInvolvingPlayerAsLoser.filter(function(match){return match.losing_player_score===0&&match.winning_player_score>=11;});// If they have any matches lost without winning a point, award achievement.
return matchesLostWithoutEarningAPoint.length>0?matchesLostWithoutEarningAPoint[0].winning_player_id:"";};var checkForSuperior=function checkForSuperior(matches,player){// Filter only to be the matches where the winner is this player
var matchesInvolvingPlayerAsWinner=matches.filter(function(match){return match.winning_player_id===player.id;});var matchesInvolving1300ELORank=matchesInvolvingPlayerAsWinner.filter(function(match){return match.winner_new_elo>=1300;});return matchesInvolving1300ELORank.length>0?matchesInvolving1300ELORank[0].losing_player_id:"";};var checkForCellarDwellar=function checkForCellarDwellar(matches,player){// Filter only to be the matches where the loser is this player
var matchesInvolvingPlayerAsLoser=matches.filter(function(match){return match.losing_player_id===player.id;});var matchesInvolving1100ELORank=matchesInvolvingPlayerAsLoser.filter(function(match){return match.loser_new_elo<=1100;});return matchesInvolving1100ELORank.length>0?matchesInvolving1100ELORank[0].winning_player_id:"";};var checkForALittleEmbarrassing=function checkForALittleEmbarrassing(matches,player){// Filter only to be the matches where the loser is this player
var matchesInvolvingPlayerAsLoser=matches.filter(function(match){return match.losing_player_id===player.id;});var matchesInvolvingALossToRelativeScrubOpponent=matchesInvolvingPlayerAsLoser.filter(function(match){return match.losing_player_original_elo-match.winning_player_original_elo>=200;});return matchesInvolvingALossToRelativeScrubOpponent.length>0?matchesInvolvingALossToRelativeScrubOpponent[0].winning_player_id:"";};var checkForShouldHavePutMoneyOnIt=function checkForShouldHavePutMoneyOnIt(matches,player){// Filter only to be the matches where the winner is this player
var matchesInvolvingPlayerAsWinner=matches.filter(function(match){return match.winning_player_id===player.id;});var matchesInvolvingLowOddsWin=matchesInvolvingPlayerAsWinner.filter(function(match){return match.losing_player_original_elo-match.winning_player_original_elo>=200;});return matchesInvolvingLowOddsWin.length>0?matchesInvolvingLowOddsWin[0].losing_player_id:"";};var AchievementChecker_decorateAchievementForUpload=function decorateAchievementForUpload(badgeDesc,earnedPlayer,involvedPlayer){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},badgeDesc),{},{id:Object(v4["a" /* default */])(),date:new Date().toISOString(),player_id:earnedPlayer.id,involved_player:involvedPlayer.id});};var AchievementChecker_checkForAchievementTriggers=function checkForAchievementTriggers(winningPlayer,losingPlayer,badges,matches,players,onError){var winnerBadgeKeys=getBadgeKeys(winningPlayer,badges);var loserBadgeKeys=getBadgeKeys(losingPlayer,badges);var playersMap=getPlayersMap(players);BADGE_CHECK_MAP.forEach(function(checkFn,badge){var involvedPlayer;// Check achievement criteria for the winning player
if(!winnerBadgeKeys.includes(badge.key)&&(involvedPlayer=checkFn(matches,winningPlayer))!==""){QuickHitAPI_QuickHitAPI.addBadge(AchievementChecker_decorateAchievementForUpload(badge,winningPlayer,playersMap.get(involvedPlayer)),function(){return;},onError);}// Check achievement criteria for the losing player
if(!loserBadgeKeys.includes(badge.key)&&(involvedPlayer=checkFn(matches,losingPlayer))!==""){QuickHitAPI_QuickHitAPI.addBadge(AchievementChecker_decorateAchievementForUpload(badge,losingPlayer,playersMap.get(involvedPlayer)),function(){return;},onError);}});};var AchievementChecker_generateTournamentAchievements=function generateTournamentAchievements(tournamentName,earnedPlayer,involvedPlayer,onError){// Create the badge key based off the tournament name
// e.g. "Flipped Transparent Muscle" becomes "flipped_transparent_muscle"
var tournamentBadgeKey=tournamentName.toLowerCase().replace(" ","_");var TOURNAMENT_WINNER_BADGE={icon:"trophy",key:tournamentBadgeKey,text:"Get first place in the tournament",title:"Winner of the \"".concat(tournamentName,"\" tournament")};var TOURNAMENT_RUNNER_UP_BADGE={icon:"certificate",key:tournamentBadgeKey,text:"Get second place in the tournament",title:"Runner-up of the \"".concat(tournamentName,"\" tournament")};QuickHitAPI_QuickHitAPI.getBadges(function(badges){if(!getBadgeKeys(earnedPlayer,badges).includes(tournamentBadgeKey)){QuickHitAPI_QuickHitAPI.addBadge(AchievementChecker_decorateAchievementForUpload(TOURNAMENT_WINNER_BADGE,earnedPlayer,involvedPlayer),function(){return;},onError);QuickHitAPI_QuickHitAPI.addBadge(AchievementChecker_decorateAchievementForUpload(TOURNAMENT_RUNNER_UP_BADGE,involvedPlayer,earnedPlayer),function(){return;},onError);}},onError);};var getBadgeKeys=function getBadgeKeys(player,badges){return badges.filter(function(badge){return badge.player_id===player.id;}).flatMap(function(badge){return badge.key;});};
// CONCATENATED MODULE: ./src/components/NewGame/NewGame.tsx
/**
 * QuickHit NewGame component.
 */function NewGame_NewGame(props){var _props$customModalOpe;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),open=_React$useState2[0],setModalOpen=_React$useState2[1];var _React$useState3=react_default.a.useState(),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),winningPlayer=_React$useState4[0],setWinningPlayer=_React$useState4[1];var _React$useState5=react_default.a.useState(),_React$useState6=Object(slicedToArray["a" /* default */])(_React$useState5,2),losingPlayer=_React$useState6[0],setLosingPlayer=_React$useState6[1];var _React$useState7=react_default.a.useState(),_React$useState8=Object(slicedToArray["a" /* default */])(_React$useState7,2),winningPlayerScore=_React$useState8[0],setWinningPlayerScore=_React$useState8[1];var _React$useState9=react_default.a.useState(),_React$useState10=Object(slicedToArray["a" /* default */])(_React$useState9,2),losingPlayerScore=_React$useState10[0],setLosingPlayerScore=_React$useState10[1];var sendCreateRequest=function sendCreateRequest(addAnother){var onSuccess=function onSuccess(){Toast_makeSuccessToast("Game added!","Back to work?");calculateAchievements(addAnother);};var onError=function onError(errorMsg){Toast_makeErrorToast("Game not added!",errorMsg);};if(!(winningPlayer&&losingPlayer)||winningPlayerScore===undefined||losingPlayerScore===undefined){return;}if((winningPlayer===null||winningPlayer===void 0?void 0:winningPlayer.id)===(losingPlayer===null||losingPlayer===void 0?void 0:losingPlayer.id)){Toast_makeErrorToast("Get outta here","Players cannot beat themselves on QuickHit");return;}if(winningPlayerScore<=losingPlayerScore){Toast_makeErrorToast("Come on man","Winning player score must be higher than losing player score");return;}// Getting the latest players from the DB to ensure up to date ELO.
QuickHitAPI_QuickHitAPI.getPlayers(function(players){var _playersMap$get,_playersMap$get2;var playersMap=getPlayersMap(players);var kFactor=15;var happyHour=false;// If it is currently a happy hour.
if(new Date().getHours()>=props.happyHour.hourStart&&new Date().getHours()<=props.happyHour.hourStart+1){kFactor=15*props.happyHour.multiplier;happyHour=true;}var elo=new elo_rank_default.a(kFactor);var winnerElo=(_playersMap$get=playersMap.get(winningPlayer.id))===null||_playersMap$get===void 0?void 0:_playersMap$get.elo;var loserElo=(_playersMap$get2=playersMap.get(losingPlayer.id))===null||_playersMap$get2===void 0?void 0:_playersMap$get2.elo;if(!(winnerElo&&loserElo)){onError("Could not get latest player data!");return;}// Gets expected score for first parameter
var winningPlayerExpectedScore=elo.getExpected(winnerElo,loserElo);var losingPlayerExpectedScore=elo.getExpected(loserElo,winnerElo);// update score, 1 if won 0 if lost
var winnerNewElo=elo.updateRating(winningPlayerExpectedScore,1,winnerElo);var loserNewElo=elo.updateRating(losingPlayerExpectedScore,0,loserElo);var matchToAdd={id:Object(v4["a" /* default */])(),date:new Date().toISOString(),winning_player_id:winningPlayer.id,winning_player_score:winningPlayerScore,winning_player_original_elo:winnerElo,losing_player_id:losingPlayer.id,losing_player_score:losingPlayerScore,losing_player_original_elo:loserElo,winner_new_elo:winnerNewElo,loser_new_elo:loserNewElo,happy_hour:happyHour};// Assigning new elo values to player object, then PATCHING.
winningPlayer.elo=winnerNewElo;losingPlayer.elo=loserNewElo;QuickHitAPI_QuickHitAPI.addNewMatch(matchToAdd,winningPlayer,losingPlayer,onSuccess,onError);},onError);};var calculateAchievements=function calculateAchievements(addAnother){if(!(winningPlayer&&losingPlayer)){return;}var onError=function onError(errorMsg){Toast_makeErrorToast("Could not calculate achievements!",errorMsg);};// After new match has been added, fetch the matches and badges...
QuickHitAPI_QuickHitAPI.getMatches(function(matches){QuickHitAPI_QuickHitAPI.getBadges(function(badges){AchievementChecker_checkForAchievementTriggers(winningPlayer,losingPlayer,badges,matches,props.players,onError);setModalOpen(addAnother);setWinningPlayer(undefined);setLosingPlayer(undefined);setWinningPlayerScore(undefined);setLosingPlayerScore(undefined);if(props.onNewGameAdded){props.onNewGameAdded();}// Force refresh the data after a match has been added.
props.setForceRefresh(true);},onError);},onError);};var renderPlayerOption=function renderPlayerOption(player){return{key:player.id,text:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:player.icon,size:"small"}),player.name]}),value:JSON.stringify(player)};};return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){return setModalOpen(false);},onOpen:function onOpen(){return setModalOpen(true);},open:open,trigger:(_props$customModalOpe=props.customModalOpenElement)!==null&&_props$customModalOpe!==void 0?_props$customModalOpe:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Button["a" /* default */],{inverted:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"}),"Enter game"]}),children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"plus"}),"New game"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{className:"new-game-form",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Group,{widths:"equal",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Select,{fluid:true,label:/*#__PURE__*/Object(jsx_runtime["jsxs"])("b",{children:["Winning player",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"})]}),options:props.players.map(function(player){return renderPlayerOption(player);}),search:function search(options,value){return options.filter(function(option){var player=JSON.parse(option.value);return player.name.toLowerCase().includes(value.toLowerCase());});},placeholder:"Chicken Dinner",required:true,onChange:function onChange(event,data){return setWinningPlayer(JSON.parse(data.value));},value:winningPlayer?renderPlayerOption(winningPlayer).value:""}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Field,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("label",{children:"Winning player score"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("input",{type:"number",min:0,required:true,value:winningPlayerScore!==null&&winningPlayerScore!==void 0?winningPlayerScore:"",onChange:function onChange(event){return setWinningPlayerScore(event.target.value!==""?parseInt(event.target.value):undefined);}})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Select,{fluid:true,label:/*#__PURE__*/Object(jsx_runtime["jsxs"])("b",{children:["Losing player",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"close"})]}),options:props.players.map(function(player){return renderPlayerOption(player);}),search:function search(options,value){return options.filter(function(option){var player=JSON.parse(option.value);return player.name.toLowerCase().includes(value.toLowerCase());});},placeholder:"Big Dog",required:true,onChange:function onChange(event,data){return setLosingPlayer(JSON.parse(data.value));},value:losingPlayer?renderPlayerOption(losingPlayer).value:""}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Field,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("label",{children:"Losing player score"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("input",{type:"number",min:0,required:true,value:losingPlayerScore!==null&&losingPlayerScore!==void 0?losingPlayerScore:"",onChange:function onChange(event){return setLosingPlayerScore(event.target.value!==""?parseInt(event.target.value):undefined);}})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return sendCreateRequest(false);},disabled:!(winningPlayer&&winningPlayerScore!==undefined&&losingPlayer&&losingPlayerScore!==undefined),children:"GG"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return sendCreateRequest(true);},disabled:!(winningPlayer&&winningPlayerScore!==undefined&&losingPlayer&&losingPlayerScore!==undefined),children:"Just one more game"})]})})]});}/* harmony default export */ var components_NewGame_NewGame = (NewGame_NewGame);
// CONCATENATED MODULE: ./src/containers/NewGame/NewGame.ts
function mapStateToProps(store,ownProps){return{players:store.ttData.players,happyHour:store.ttData.happyHour,customModalOpenElement:ownProps.customModalOpenElement,onNewGameAdded:ownProps.onNewGameAdded};}/* harmony default export */ var containers_NewGame_NewGame = (Object(es["b" /* connect */])(mapStateToProps,mapTTDispatchToProps)(components_NewGame_NewGame));
// CONCATENATED MODULE: ./src/containers/NewGame/index.ts

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/views/Card/Card.js
var Card = __webpack_require__(321);

// EXTERNAL MODULE: ./src/components/NewEditPlayer/NewEditPlayer.css
var NewEditPlayer = __webpack_require__(545);

// CONCATENATED MODULE: ./src/util/fa-icons.ts
var FA_ICONS=["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair","angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out","audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up","address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark","chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full","archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline","address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi","desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload","dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch","adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint","align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink","archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline","genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars","hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline","ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair","adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint","ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi","box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse","ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench","ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight","ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench","bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy","bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline","asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync","baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball","ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate","address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair","ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair","archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack","500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square","chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"];
// CONCATENATED MODULE: ./src/components/NewEditPlayer/NewEditPlayer.tsx
var NewEditPlayer_renderIconOption=function renderIconOption(icon){return{key:icon,text:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:icon,size:"big"}),value:icon};};var iconOptions=FA_ICONS.map(function(icon){return NewEditPlayer_renderIconOption(icon);});/**
 * QuickHit NewEditPlayer component.
 */function NewEditPlayer_NewEditPlayer(props){var _props$customModalOpe;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),open=_React$useState2[0],setModalOpen=_React$useState2[1];var _useState=Object(react["useState"])(props.editingPlayer?props.editingPlayer.icon:""),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),icon=_useState2[0],setIcon=_useState2[1];var _useState3=Object(react["useState"])(props.editingPlayer?props.editingPlayer.name:""),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),name=_useState4[0],setName=_useState4[1];var sendCreateRequest=function sendCreateRequest(){var _props$editingPlayer$,_props$editingPlayer,_props$editingPlayer$2,_props$editingPlayer2;var onSuccess=function onSuccess(){if(props.editingPlayer){Toast_makeSuccessToast("Player updated!","Welcome back, ".concat(player.name,"!"));}else{Toast_makeSuccessToast("Player added!","Welcome to QuickHit!");}setModalOpen(false);if(props.onRequestMade){props.onRequestMade();}};var onError=function onError(errorMsg){if(props.editingPlayer){Toast_makeErrorToast("Player not updated!",errorMsg);}else{Toast_makeErrorToast("Player not added!",errorMsg);}};var player={id:(_props$editingPlayer$=(_props$editingPlayer=props.editingPlayer)===null||_props$editingPlayer===void 0?void 0:_props$editingPlayer.id)!==null&&_props$editingPlayer$!==void 0?_props$editingPlayer$:Object(v4["a" /* default */])(),name:name,icon:icon,/* Default ELO rank, or the updated player's ELO. */elo:(_props$editingPlayer$2=(_props$editingPlayer2=props.editingPlayer)===null||_props$editingPlayer2===void 0?void 0:_props$editingPlayer2.elo)!==null&&_props$editingPlayer$2!==void 0?_props$editingPlayer$2:1200};QuickHitAPI_QuickHitAPI.addOrUpdatePlayer(player,onSuccess,onError);};return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){return setModalOpen(false);},onOpen:function onOpen(){return setModalOpen(true);},open:open,trigger:(_props$customModalOpe=props.customModalOpenElement)!==null&&_props$customModalOpe!==void 0?_props$customModalOpe:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Button["a" /* default */],{inverted:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"user plus"}),"New player"]}),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Header,{children:props.editingPlayer?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"pencil"}),"Edit Player"]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"plus"}),"New Player"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{onSubmit:sendCreateRequest,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Group,{widths:"equal",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{fluid:true,label:"Name",required:true,placeholder:"Name",onChange:function onChange(event,data){return setName(data.value);},value:name}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Select,{fluid:true,label:"Icon",required:true,placeholder:"user",options:iconOptions,search:function search(options,value){return options.filter(function(option){var _option$value;return(_option$value=option.value)===null||_option$value===void 0?void 0:_option$value.toString().startsWith(value);});},onChange:function onChange(event,data){return setIcon(data.value);},value:icon})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Card["a" /* default */],{children:["Picture preview:"," ",icon?/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:icon,size:"huge",circular:true,style:{margin:"auto",color:"orangered"}}):"Select or type an icon name."]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://react.semantic-ui.com/elements/icon/",target:"_blank",rel:"noreferrer",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"help",children:"Icon search"})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Button,{children:props.editingPlayer?/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:"Update"}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:"Create"})})]})})]});}/* harmony default export */ var components_NewEditPlayer_NewEditPlayer = (NewEditPlayer_NewEditPlayer);
// EXTERNAL MODULE: ./src/components/Ladder/PlayerCard/PlayerCard.css
var PlayerCard = __webpack_require__(546);

// CONCATENATED MODULE: ./src/util/QuickHitPage.ts
function BASE_PATH(){var _process$env$REACT_AP;return(_process$env$REACT_AP="/quick-hit")!==null&&_process$env$REACT_AP!==void 0?_process$env$REACT_AP:"";}/**
 * Enum that represents possible pages in the QuickHit ELO application.
 */var QuickHitPage;(function(QuickHitPage){QuickHitPage["HOME"]="/";QuickHitPage["LADDER"]="/ladder";QuickHitPage["RECENT_GAMES"]="/recent";QuickHitPage["STATISTICS"]="/player/:playerId";QuickHitPage["TOURNAMENT"]="/tournament";QuickHitPage["NOT_FOUND"]="/404";})(QuickHitPage||(QuickHitPage={}));
// EXTERNAL MODULE: ./src/components/Ladder/Ladder.css
var Ladder = __webpack_require__(547);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Table/Table.js
var Table = __webpack_require__(754);

// CONCATENATED MODULE: ./src/components/Ladder/Ladder.tsx
var NUM_OF_FORM_GUIDE_MATCHES=5;/**
 * QuickHit Ladder page.
 */function Ladder_Ladder(props){var renderPlayersAsCards=function renderPlayersAsCards(){var playersLadder=[];props.players.forEach(function(player){var winLoss=getWinLossForPlayer(player.id,props.matches);var playerCard=/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:player,winLoss:winLoss});// If we are hiding zero game players, then only push if they have played a game
if(props.hideZeroGamePlayers){if(winLoss.wins+winLoss.losses>0){playersLadder.push(playerCard);}}else{playersLadder.push(playerCard);}});// Sorting the player items by elo.
playersLadder.sort(function(player1,player2){return player2.props.player.elo-player1.props.player.elo;});return playersLadder;};var renderPlayersInTable=function renderPlayersInTable(){var playersLadder=[];var playerTableRows=[];var sortedPlayers=props.players.sort(function(player1,player2){return player2.elo-player1.elo;});for(var i=0;i<sortedPlayers.length;i++){var player=sortedPlayers[i];var winLoss=getWinLossForPlayer(player.id,props.matches);var addPlayer=true;if(props.hideZeroGamePlayers&&winLoss.losses+winLoss.wins==0){addPlayer=false;}if(addPlayer){var formStr=winLoss&&winLoss.formGuide.substr(0,NUM_OF_FORM_GUIDE_MATCHES).split("").reverse().join("");playerTableRows.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{className:"player-row",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{className:"player-cell",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{className:"player-row-link",to:"".concat(BASE_PATH()).concat(QuickHitPage.STATISTICS.replace(":playerId",player.id)),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[generateLadderTrendIcon(player,i,sortedPlayers),/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:player.icon,size:"small"}),player.name]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:player.elo}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Cell,{children:[winLoss.wins,"-",winLoss.losses]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:formStr!==""?formStr:"N/A"})]}));}}playersLadder.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */],{unstackable:true,celled:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Header,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Player"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"ELO"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"W-L"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Form"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Body,{children:playerTableRows})]}));return playersLadder;};var generateLadderTrendIcon=function generateLadderTrendIcon(player,positionOnLadder,sortedPlayers){var mostRecentMatch;var iconToReturn=/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{color:"orange",name:"minus"});// Find player's most recent match (assumes matches already sorted by newest)
for(var i=0;i<props.matches.length;i++){var match=props.matches[i];if(match.winning_player_id===player.id||match.losing_player_id===player.id){mostRecentMatch=match;break;}}if(mostRecentMatch){// If the most recent match was a loss
if(mostRecentMatch.losing_player_id===player.id){if(positionOnLadder!==0){var wentDown=false;// Get the player above them
var playerAboveOnLadder=sortedPlayers[positionOnLadder-1];// If the player above them was the player they versed, then use that player's original elo.
if(playerAboveOnLadder.id===mostRecentMatch.winning_player_id&&// If the pre-match elo was higher than the player above, and now it's not, then this means the
// target player went down on the ladder.
mostRecentMatch.losing_player_original_elo>=mostRecentMatch.winning_player_original_elo){wentDown=true;}// Otherwise just use the above player's current elo.
else{// If the pre-match elo was higher than the player above, and now it's not, then this means the
// target player went down on the ladder.
if(mostRecentMatch.losing_player_original_elo>=playerAboveOnLadder.elo){wentDown=true;}}if(wentDown){iconToReturn=/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{color:"red",name:"arrow down"});}}}// Otherwise, match was a win
else{// Get the player below them
var playerBelowOnLadder=sortedPlayers[positionOnLadder+1];var wentUp=false;// If the player below them was the player they versed, then use that player's original elo.
if(playerBelowOnLadder.id===mostRecentMatch.losing_player_id&&// If the pre-match elo was lower than the player below, and now it's not, then this means the
// target player went up on the ladder.
mostRecentMatch.winning_player_original_elo<=mostRecentMatch.losing_player_original_elo){wentUp=true;}else{// If the pre-match elo was lower than the player below, and now it's not, then this means
// the target player went up the ladder.
if(playerBelowOnLadder.elo>=mostRecentMatch.winning_player_original_elo){wentUp=true;}}if(wentUp){iconToReturn=/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{color:"green",name:"arrow up"});}}}return iconToReturn;};var renderPlayers=function renderPlayers(){if(props.showCards){return renderPlayersAsCards();}else{return renderPlayersInTable();}};var refreshContent=function refreshContent(){// Set the store force refresh flag, alerting QHDataLoader to do a new fetch.
props.setForceRefresh(true);};return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"players",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Ladder"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"toggles",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return props.setHideZeroGamePlayers(!props.hideZeroGamePlayers);},color:props.hideZeroGamePlayers?"green":"red",children:props.hideZeroGamePlayers?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"eye"})," Show zero game players"]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"eye slash"})," Hide zero game players"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return props.setShowCards(!props.showCards);},color:props.showCards?"orange":"yellow",children:props.showCards?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"table"})," Show ladder table"]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"address card"})," Show player cards"]})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:!props.loading,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"players-area horizontal",children:renderPlayers()}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"new-buttons",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(components_NewEditPlayer_NewEditPlayer,{onRequestMade:refreshContent}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_NewGame_NewGame,{})]})]})})]});}/* harmony default export */ var components_Ladder_Ladder = (Ladder_Ladder);
// CONCATENATED MODULE: ./src/components/Ladder/PlayerCard/PlayerCard.tsx
/**
 * QuickHit PlayerCard component.
 */function PlayerCard_PlayerCard(props){var formStr=props.winLoss&&props.winLoss.formGuide.substr(0,NUM_OF_FORM_GUIDE_MATCHES).split("").reverse().join("");return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Card["a" /* default */],{as:"span",className:"player-card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Card["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.STATISTICS.replace(":playerId",props.player.id)),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Card["a" /* default */].Header,{className:"player-card-header",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:props.player.icon,size:"big"})}),props.player.name]})})}),props.winLoss&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(Card["a" /* default */].Content,{extra:true,className:"extras",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:props.player.elo}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:["Wins: ",props.winLoss.wins," Losses: ",props.winLoss.losses]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:["Form: ",formStr!==""?formStr:"N/A"]})]})]});}/* harmony default export */ var Ladder_PlayerCard_PlayerCard = (PlayerCard_PlayerCard);
// CONCATENATED MODULE: ./src/components/Home/Home.tsx
/**
 * QuickHit KeyPrompt page.
 */function Home_Home(props){var _props$happyHour;var getCurrentChampion=function getCurrentChampion(){var players=props.players;players.sort(function(player1,player2){return player2.elo-player1.elo;});return players[0];};var refreshContent=function refreshContent(){// Set the store force refresh flag, alerting QHDataLoader to do a new fetch.
props.setForceRefresh(true);};return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"home",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{transitionOnMount:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,inverted:true,className:"welcome-header",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"table tennis",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:"Welcome to"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"quick-hit-splash",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"chevron right",size:"tiny"}),"Quick",/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"header-hit",children:"Hit"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Subheader,{children:"A table tennis ELO-tracking application"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{transitionOnMount:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(ButtonGroup["a" /* default */],{horizontal:true,className:"home-menu-buttons",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{as:"h3",icon:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.LADDER),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"list",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Ladder"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{as:"h3",icon:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.TOURNAMENT),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Tournament"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{as:"h3",icon:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.RECENT_GAMES),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"history",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Recent games"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_NewGame_NewGame,{customModalOpenElement:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h3",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"plus",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Enter game"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_NewEditPlayer_NewEditPlayer,{onRequestMade:refreshContent,customModalOpenElement:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h3",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"add user",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Sign up"})]})})]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Segment["a" /* default */],{inverted:true,className:"github-area",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{as:"h3",icon:true,circular:true,inverted:true,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"github"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */].Content,{children:["QuickHit is an open source project made by"," ",/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://github.com/jamesgiu/quick-hit/graphs/contributors",children:"cool people"}),"."]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(ButtonGroup["a" /* default */],{className:"github-buttons",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://github.com/jamesgiu/quick-hit#getting-started-with-firebase",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{color:"teal",children:"Host it yourself"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://github.com/jamesgiu/quick-hit/issues/new/choose",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{color:"red",children:"Report an issue"})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:!props.loading,animation:"fade up",duration:2000,unmountOnHide:true,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Segment["a" /* default */],{inverted:true,className:"champion-area",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[props.players.length>0&&/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:getCurrentChampion()})," is the current"," ",/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"champion-text",children:" champion "})]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:!props.loading,animation:"fade up",duration:2000,unmountOnHide:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"happy-hour",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{children:[(_props$happyHour=props.happyHour)===null||_props$happyHour===void 0?void 0:_props$happyHour.multiplier,"x happy hour!"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:["Today's ",/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"happy-hour-highlight",children:"happy hour"})," is starting at"," ",/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"happy-hour-highlight",children:renderDateString(props.happyHour)})]})]})})]});}var renderDateString=function renderDateString(happyHour){var date=new Date();date.setHours(happyHour.hourStart,0,0);return date.toLocaleTimeString();};/* harmony default export */ var components_Home_Home = (Home_Home);
// CONCATENATED MODULE: ./src/containers/Home/Home.ts
/* harmony default export */ var containers_Home_Home = (Object(es["b" /* connect */])(mapTTDataToProps,mapTTDispatchToProps)(components_Home_Home));
// CONCATENATED MODULE: ./src/containers/Home/index.ts

// CONCATENATED MODULE: ./src/components/NotFound/NotFound.tsx
function NotFound(){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"not-found",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"warning",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Page not found"})]})});}/* harmony default export */ var NotFound_NotFound = (NotFound);
// EXTERNAL MODULE: ./src/components/Footer/Footer.css
var Footer = __webpack_require__(549);

// CONCATENATED MODULE: ./src/components/Footer/Footer.tsx
/**
 * Footer component in QuickHit.
 */function Footer_Footer(){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"footer",children:["Copyright (c) 2021 quick-hit",/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"report-issue",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://github.com/jamesgiu/quick-hit",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"github",color:"orange",size:"large"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://github.com/jamesgiu/quick-hit/issues/new/choose",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"warning circle",color:"red",size:"large"})})]})]});}/* harmony default export */ var components_Footer_Footer = (Footer_Footer);
// EXTERNAL MODULE: ./src/components/Navbar/Navbar.css
var Navbar = __webpack_require__(550);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Menu/Menu.js
var Menu = __webpack_require__(386);

// EXTERNAL MODULE: ./src/components/KeyPrompt/KeyPrompt.css
var KeyPrompt = __webpack_require__(551);

// EXTERNAL MODULE: ./node_modules/firebase/compat/dist/index.esm.js + 38 modules
var index_esm = __webpack_require__(232);

// EXTERNAL MODULE: ./node_modules/firebase/auth/dist/index.esm.js + 1 modules
var dist_index_esm = __webpack_require__(697);

// CONCATENATED MODULE: ./src/components/KeyPrompt/KeyPrompt.tsx
/**
 * QuickHit KeyPrompt prompt.
 */function KeyPrompt_KeyPrompt(props){var _props$chosenInstance,_props$authDetail;var _useState=Object(react["useState"])(""),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),key=_useState2[0],setKey=_useState2[1];var _useState3=Object(react["useState"])(props.chosenInstance),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),chosenInstance=_useState4[0],setChosenInstance=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),isOpen=_useState6[0],setIsOpen=_useState6[1];var _useState7=Object(react["useState"])([]),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),instances=_useState8[0],setInstances=_useState8[1];var _useState9=Object(react["useState"])(),_useState10=Object(slicedToArray["a" /* default */])(_useState9,2),authDetail=_useState10[0],setAuthDetail=_useState10[1];var getInstances=function getInstances(){var onFailure=function onFailure(error){Toast_makeErrorToast("Could not load instances catalogue!",error);};var onSuccess=function onSuccess(instances){setInstances(instances);};QuickHitAPI_QuickHitAPI.getInstances(onSuccess,onFailure);};Object(react["useEffect"])(function(){getInstances();},[]);var signInWithGoogle=function signInWithGoogle(){// Ensure modal stays open until sign in is complete.
setIsOpen(true);var firebaseConfig={apiKey:chosenInstance===null||chosenInstance===void 0?void 0:chosenInstance.fb_api_key,authDomain:(chosenInstance===null||chosenInstance===void 0?void 0:chosenInstance.fb_project_id)+".firebaseapp.com",databaseURL:(chosenInstance===null||chosenInstance===void 0?void 0:chosenInstance.fb_project_id)+".firebaseio.com",projectId:chosenInstance===null||chosenInstance===void 0?void 0:chosenInstance.fb_project_id};if(!index_esm["a" /* default */].apps.length){// Initialize Firebase
index_esm["a" /* default */].initializeApp(firebaseConfig);}var auth=index_esm["a" /* default */].auth();auth.setPersistence(index_esm["a" /* default */].auth.Auth.Persistence.LOCAL);auth.onIdTokenChanged(function(newUser){if(newUser){newUser.getIdTokenResult().then(function(token){props.setAuthDetail({idToken:token.token,expiryTime:token.expirationTime,userName:newUser.displayName,email:newUser.email,userCredential:newUser});});}});var provider=new index_esm["a" /* default */].auth.GoogleAuthProvider();provider.setCustomParameters({prompt:"select_account"});auth.signInWithPopup(provider).then(function(result){var _result$user;(_result$user=result.user)===null||_result$user===void 0?void 0:_result$user.getIdTokenResult().then(function(token){var _result$user2,_result$user3,_result$user4,_result$user5,_result$user6;setAuthDetail({idToken:token.token,expiryTime:token.expirationTime,userName:(_result$user2=result.user)===null||_result$user2===void 0?void 0:_result$user2.displayName,email:(_result$user3=result.user)===null||_result$user3===void 0?void 0:_result$user3.email,userCredential:(_result$user4=result.user)!==null&&_result$user4!==void 0?_result$user4:undefined});esm["a" /* default */].event({category:"Request",action:"User ".concat((_result$user5=result.user)===null||_result$user5===void 0?void 0:_result$user5.displayName," (").concat((_result$user6=result.user)===null||_result$user6===void 0?void 0:_result$user6.email,") authenticated")});});}).catch(function(error){Toast_makeErrorToast("Unable to authenticate","Could not sign in via Google! "+error.message);});};var renderInstanceOption=function renderInstanceOption(instance){return{key:instance.fb_url,text:/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:instance.name}),value:JSON.stringify(instance)};};// Only for Google Auth - non-Google auth auto-refreshes the token.
var tokenExpired=((_props$chosenInstance=props.chosenInstance)===null||_props$chosenInstance===void 0?void 0:_props$chosenInstance.google_auth)&&props.authDetail&&Date.now()>=new Date(props.authDetail.expiryTime).getTime();return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{open:props.authKey===undefined||props.chosenInstance===undefined||tokenExpired||isOpen,onClose:function onClose(){return setIsOpen(false);},onOpen:function onOpen(){return setIsOpen(true);},closeOnDimmerClick:false,trigger:/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",icon:props.authDetail?"key":"exclamation mark",className:!props.authDetail?"required-sign-in":"signed-in"}),closeIcon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"key"}),"Authenticate"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Content,{className:"key-form",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */],{warning:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Group,{widths:"equal",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Select,{className:"instance-select",fluid:true,label:/*#__PURE__*/Object(jsx_runtime["jsxs"])("b",{children:["Instance",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"location arrow"})]}),options:instances.map(function(instance){return renderInstanceOption(instance);}),search:function search(options,value){return options.filter(function(option){var instance=JSON.parse(option.value);return instance.name.toLowerCase().includes(value.toLowerCase());});},placeholder:"Select an instance",required:true,onChange:function onChange(event,data){return setChosenInstance(JSON.parse(data.value));},value:chosenInstance?renderInstanceOption(chosenInstance).value:""}),//TODO ensure users need to supply a secret _and_ login via google???
(chosenInstance===null||chosenInstance===void 0?void 0:chosenInstance.google_auth)?/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Field,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Button,{className:"google-button",onClick:signInWithGoogle,color:"google plus",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"google"}),!(authDetail===null||authDetail===void 0?void 0:authDetail.userName)?((_props$authDetail=props.authDetail)===null||_props$authDetail===void 0?void 0:_props$authDetail.userCredential)&&!tokenExpired?props.authDetail.userName:"Select an account with Google":"".concat(authDetail.userName)]})}):/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Field,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{fluid:true,label:"Key required to proceed",required:true,placeholder:"Key to access this instance",type:"password",onChange:function onChange(event,data){return setKey(data.value);}})})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{disabled:!authDetail&&key=="",onClick:function onClick(){props.setAuthKey(key);props.setChosenInstance(chosenInstance);if(authDetail){props.setAuthDetail(authDetail);Toast_makeSuccessToast("Authenticated","Signed in as "+authDetail.userName);}// If no token granted here, then reset the redux token too. This will force a refresh
// in QuickHitAPI.ts
else{props.setAuthDetail(undefined);setAuthDetail(undefined);}setIsOpen(false);// Allow for the async Redux calls.
setTimeout(function(){return location.reload();},500);},children:"Save"})]})]});}/* harmony default export */ var components_KeyPrompt_KeyPrompt = (KeyPrompt_KeyPrompt);
// CONCATENATED MODULE: ./src/containers/KeyPrompt/KeyPrompt.ts
function KeyPrompt_mapStateToProps(store){return{authKey:store.authStore.authKey,chosenInstance:store.authStore.chosenInstance,authDetail:store.authStore.authDetail};}function mapDispatchToProps(dispatch){return{setAuthKey:function setAuthKey(newKey){return dispatch(AuthActions_setAuthKey(newKey));},setAuthDetail:function setAuthDetail(newAuthDetail){return dispatch(AuthActions_setAuthDetail(newAuthDetail));},setChosenInstance:function setChosenInstance(newInstance){return dispatch(AuthActions_setChosenInstance(newInstance));}};}/* harmony default export */ var containers_KeyPrompt_KeyPrompt = (Object(es["b" /* connect */])(KeyPrompt_mapStateToProps,mapDispatchToProps)(components_KeyPrompt_KeyPrompt));
// CONCATENATED MODULE: ./src/containers/KeyPrompt/index.ts

// EXTERNAL MODULE: ./node_modules/react-darkreader/dist/index.esm.js
var react_darkreader_dist_index_esm = __webpack_require__(461);

// CONCATENATED MODULE: ./src/components/Settings/Settings.tsx
/**
 * QuickHit Settings menu.
 */function Settings(props){var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var _useDarkreader=Object(react_darkreader_dist_index_esm["a" /* useDarkreader */])(props.darkMode),_useDarkreader2=Object(slicedToArray["a" /* default */])(_useDarkreader,2),isDarkMode=_useDarkreader2[0],toggle=_useDarkreader2[1].toggle;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{open:isOpen,onClose:function onClose(){return setIsOpen(false);},onOpen:function onOpen(){return setIsOpen(true);},trigger:/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",icon:"wrench"}),closeIcon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"wrench"}),"Settings"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Content,{className:"options-form",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Field,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{label:"Set username (e.g. for chat)",onChange:function onChange(event,data){if(data.value.length<=128){props.setUsername(data.value);}},value:decodeURIComponent(props.username),maxlength:"128"})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{toggle:true,label:"Hide zero game players",checked:props.hideZeroGamePlayers,onClick:function onClick(){props.setHideZeroGamePlayers(!props.hideZeroGamePlayers);}})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{toggle:true,label:"Show ladder as player cards",checked:props.showCards,onClick:function onClick(){props.setShowCards(!props.showCards);}})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{toggle:true,label:"Make QuickHit even darker",checked:isDarkMode,onClick:function onClick(){props.setDarkMode(!props.darkMode);toggle();}})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Group,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{toggle:true,label:"Disable music ",checked:props.disableMusic,onClick:function onClick(){props.setDisableMusic(!props.disableMusic);}})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{icon:"cross",onClick:function onClick(){setIsOpen(false);},children:"Close"})]})]});}/* harmony default export */ var Settings_Settings = (Settings);
// CONCATENATED MODULE: ./src/redux/actions/ViewActions/index.ts
function setZeroGamesFilter(hideZeroGamesPlayers){return{type:SET_HIDE_ZERO_GAME_PLAYERS,value:hideZeroGamesPlayers};}function ViewActions_setShowCards(showCards){return{type:SET_SHOW_CARDS,value:showCards};}function ViewActions_setDisableMusic(disableMusic){return{type:SET_DISABLE_MUSIC,value:disableMusic};}function ViewActions_setUsername(username){return{type:SET_USERNAME,value:username};}function ViewActions_setDarkMode(isDarkMode){return{type:SET_DARK_MODE,value:isDarkMode};}
// CONCATENATED MODULE: ./src/containers/Settings/Settings.ts
function Settings_mapStateToProps(store){return{hideZeroGamePlayers:store.viewStore.hideZeroGamePlayers,showCards:store.viewStore.showCards,disableMusic:store.viewStore.disableMusic,username:store.viewStore.username,darkMode:store.viewStore.darkMode};}function Settings_mapDispatchToProps(dispatch){return{setHideZeroGamePlayers:function setHideZeroGamePlayers(hideZeroGamePlayers){return dispatch(setZeroGamesFilter(hideZeroGamePlayers));},setShowCards:function setShowCards(showCards){return dispatch(ViewActions_setShowCards(showCards));},setDisableMusic:function setDisableMusic(disableMusic){return dispatch(ViewActions_setDisableMusic(disableMusic));},setUsername:function setUsername(username){return dispatch(ViewActions_setUsername(username));},setDarkMode:function setDarkMode(isDarkMode){return dispatch(ViewActions_setDarkMode(isDarkMode));}};}/* harmony default export */ var containers_Settings_Settings = (Object(es["b" /* connect */])(Settings_mapStateToProps,Settings_mapDispatchToProps)(Settings_Settings));
// CONCATENATED MODULE: ./src/containers/Settings/index.ts

// EXTERNAL MODULE: ./src/components/Chat/Chat.css
var Chat = __webpack_require__(554);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Divider/Divider.js
var Divider = __webpack_require__(755);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/addons/Portal/Portal.js
var Portal = __webpack_require__(699);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/views/Feed/Feed.js
var Feed = __webpack_require__(758);

// EXTERNAL MODULE: ./node_modules/react-time-ago/modules/ReactTimeAgo.js + 7 modules
var ReactTimeAgo = __webpack_require__(767);

// CONCATENATED MODULE: ./src/components/Chat/Chat.tsx
var POLL_RATE_MS=1000;/**
 * Chat component in QuickHit.
 */function Chat_Chat(props){var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),isOpen=_React$useState2[0],setIsOpen=_React$useState2[1];var _React$useState3=react_default.a.useState(),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),chatRoom=_React$useState4[0],setChatRoom=_React$useState4[1];var _React$useState5=react_default.a.useState(),_React$useState6=Object(slicedToArray["a" /* default */])(_React$useState5,2),messageField=_React$useState6[0],setMessageField=_React$useState6[1];var intervalRef=Object(react["useRef"])();var getChatroomOrCreateOneIfNotPresent=function getChatroomOrCreateOneIfNotPresent(){var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get today's chatroom",error);};var onSuccess=function onSuccess(chatRoom){if(chatRoom===null||chatRoom===void 0?void 0:chatRoom.date){setChatRoom(chatRoom);}else{// No chatroom generated for today, generate one
var newChatroom={date:getTodaysDate(),// Initialise the chat room.
messages:{"welcome-message":{author:"QuickHit",id:Object(v4["a" /* default */])(),text:"Welcome to the daily chat for ".concat(getTodaysDate()),date:new Date().toISOString()}}};QuickHitAPI_QuickHitAPI.setChatRoom(newChatroom,function(){setChatRoom(newChatroom);return;},onFailure);}};QuickHitAPI_QuickHitAPI.getTodaysChatRoom(onSuccess,onFailure);};var getMessages=function getMessages(){if(!chatRoom||!chatRoom.messages){return[];}var events=[];var messages=Object.entries(chatRoom.messages);// Sort messages.
messages.sort(function(msgA,msgB){return new Date(msgB[1].date).getTime()-new Date(msgA[1].date).getTime();});messages.forEach(function(_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),message=_ref2[1];events.push({date:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"event-date",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"author",children:decodeURIComponent(message.author)})," ",/*#__PURE__*/Object(jsx_runtime["jsx"])(ReactTimeAgo["a" /* default */],{date:new Date(message.date)}),"..."]}),meta:/*#__PURE__*/Object(jsx_runtime["jsx"])(Divider["a" /* default */],{}),content:decodeURIComponent(message.text)});});return events;};// Runs on mount.
Object(react["useEffect"])(function(){getChatroomOrCreateOneIfNotPresent();},[]);var sendMessage=function sendMessage(){var onFailure=function onFailure(error){Toast_makeErrorToast("Could not get today's chatroom",error);};if(chatRoom&&messageField&&messageField.trim()!==""){if(props.username.length>128){Toast_makeErrorToast("Name too long!","Gib shorter name");return;}var updatedChatRoom=chatRoom;var newMessage={id:Object(v4["a" /* default */])(),text:messageField.length>255?"<long message goes splat>":encodeURIComponent(messageField.trim()),author:!props.username||props.username.trim()===""?"Anonymous":encodeURIComponent(props.username),date:new Date().toISOString()};updatedChatRoom.messages[newMessage.id]=newMessage;QuickHitAPI_QuickHitAPI.setChatRoom(updatedChatRoom,function(){setChatRoom(updatedChatRoom);setMessageField("");},onFailure);}};// Popover in navbar, with notification bell if possible
// Guest username at first (can set username in redux)
return/*#__PURE__*/ (//TODO hacktoberfest - add 'disabled' prop to Semantic UI portal.
Object(jsx_runtime["jsx"])("div",{className:"chat-outer",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Portal["a" /* default */],{closeOnTriggerClick:true,openOnTriggerClick:true,closeOnDocumentClick:false,trigger:chatRoom&&/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"chat-icon",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"chat",inverted:isOpen})})}),onClose:function onClose(){setIsOpen(false);if(intervalRef.current){clearInterval(intervalRef.current);}},onOpen:function onOpen(){setIsOpen(true);intervalRef.current=setInterval(function(){getChatroomOrCreateOneIfNotPresent();},POLL_RATE_MS);},children:chatRoom&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(Segment["a" /* default */],{className:"chat-portal-element",inverted:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{children:"QuickHit Daily Chat"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("p",{children:["Chat for ",chatRoom.date]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("p",{children:["Username: ",decodeURIComponent(props.username)," ",/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_Settings_Settings,{})," "]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Feed["a" /* default */],{className:"chat-feed",events:getMessages()}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{className:"message-form",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{onKeyPress:function onKeyPress(event){// If they pressed enter
if(event.key==="13"){sendMessage();}}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{inverted:true,inline:true,placeholder:"Enter a message",value:messageField,onChange:function onChange(event,data){return setMessageField(data.value);}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:sendMessage,inverted:true,disabled:!messageField||messageField.trim()==="",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"arrow right",size:"large"})})]})]})})}));}/* harmony default export */ var components_Chat_Chat = (Chat_Chat);
// CONCATENATED MODULE: ./src/containers/Chat/Chat.ts
function Chat_mapStateToProps(store){return{username:store.viewStore.username};}/* harmony default export */ var containers_Chat_Chat = (Object(es["b" /* connect */])(Chat_mapStateToProps,{})(components_Chat_Chat));
// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js
var Grid = __webpack_require__(450);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/addons/Select/Select.js
var Select = __webpack_require__(700);

// EXTERNAL MODULE: ./src/components/Comparator/Comparator.css
var Comparator = __webpack_require__(556);

// CONCATENATED MODULE: ./src/util/Predictor.ts
/**
 * A simple clamp implementation.
 * @param num The number to be clamped.
 * @param min The minimum value.
 * @param max The maximum value.
 * @returns The clamped number.
 */var clamp=function clamp(num,min,max){return Math.min(Math.max(num,min),max);};/**
 * Returns an approximation of the chance of victory of the first given player over the second given player. Takes
 * into account ELO difference and past encounters.
 * @param p1 The first player.
 * @param p2 The second player.
 * @param matches All QH matches.
 * @returns The chance of victory of the first player over the second player, as a percentage.
 */var Predictor_getChanceOfVictory=function getChanceOfVictory(p1,p2,matches){if(p1&&p2){// From an ELO point of view, if one player has an ELO 100+ above another player, they have a 100% chance of
// victory.
var eloDiff=clamp(p1.elo-p2.elo,-100,100);var standardised=(eloDiff+100)/2;var record=getRecordAgainstPlayer(p1.id,p2.id,matches);// If the two players have played before, use their past matches too.
if(record.wins+record.losses>0){var winPerc=100*(record.wins/(record.wins+record.losses));var prediction=winPerc*0.5+standardised*0.5;// Clamp the chance between 5% and 95%, because nothing's ever certain.
return Math.round(clamp(prediction,5,95)*100+Number.EPSILON)/100;}else{return Math.round(clamp(standardised,5,95)*100+Number.EPSILON)/100;}}else{return 0;}};
// CONCATENATED MODULE: ./src/components/Comparator/Comparator.tsx
/**
 * QuickHit Comparator component.
 */function Comparator_Comparator(props){var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),open=_useState2[0],setModalOpen=_useState2[1];var _useState3=Object(react["useState"])(),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),playerOne=_useState4[0],setPlayerOne=_useState4[1];var _useState5=Object(react["useState"])(),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),playerTwo=_useState6[0],setPlayerTwo=_useState6[1];var _useState7=Object(react["useState"])(),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),headToHead=_useState8[0],setHeadToHead=_useState8[1];var _useState9=Object(react["useState"])(),_useState10=Object(slicedToArray["a" /* default */])(_useState9,2),vicChance=_useState10[0],setVicChance=_useState10[1];/**
     * When the players change, update the H2H and chance of victory.
     */Object(react["useEffect"])(function(){if(playerOne&&playerTwo){setHeadToHead(getRecordAgainstPlayer(playerOne===null||playerOne===void 0?void 0:playerOne.id,playerTwo===null||playerTwo===void 0?void 0:playerTwo.id,props.matches));setVicChance(Predictor_getChanceOfVictory(playerOne,playerTwo,props.matches));}},[playerOne,playerTwo]);/**
     * Get the dropdown option for the specified player.
     * @param player The player to generate the dropdown option for.
     * @returns The props for the dropdown item to be generated.
     */var renderPlayerOption=function renderPlayerOption(player){return{key:player.id,text:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:player.icon,size:"small"}),player.name]}),value:JSON.stringify(player)};};return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){return setModalOpen(false);},onOpen:function onOpen(){return setModalOpen(true);},open:open,trigger:/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"calculator"})}),children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"calculator"}),"Compare players"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */],{columns:3,className:"comparison-grid",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Select["a" /* default */],{className:"player-select",fluid:true,options:props.players.map(function(player){return renderPlayerOption(player);}),search:function search(options,value){return options.filter(function(option){var player=JSON.parse(option.value);return player.name.toLowerCase().includes(value.toLowerCase());});},placeholder:"Chicken Dinner",required:true,onChange:function onChange(_,data){return setPlayerOne(JSON.parse(data.value));},value:playerOne?renderPlayerOption(playerOne).value:""})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"centre-column",children:"VERSUS"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Select["a" /* default */],{className:"player-select",fluid:true,options:props.players.map(function(player){return renderPlayerOption(player);}),search:function search(options,value){return options.filter(function(option){var player=JSON.parse(option.value);return player.name.toLowerCase().includes(value.toLowerCase());});},placeholder:"Big Dog",required:true,onChange:function onChange(_,data){return setPlayerTwo(JSON.parse(data.value));},value:playerTwo?renderPlayerOption(playerTwo).value:""})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:headToHead===null||headToHead===void 0?void 0:headToHead.wins}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"centre-column",children:"H2H"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:headToHead===null||headToHead===void 0?void 0:headToHead.losses})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:playerOne===null||playerOne===void 0?void 0:playerOne.elo}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"centre-column",children:"ELO"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:playerTwo===null||playerTwo===void 0?void 0:playerTwo.elo})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */].Row,{className:"prediction-row",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:vicChance?vicChance+"%":"N/A"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"centre-column",children:"CHANCE OF VICTORY"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:vicChance?100-vicChance+"%":"N/A"})]})]})})]});}/* harmony default export */ var components_Comparator_Comparator = (Comparator_Comparator);
// CONCATENATED MODULE: ./src/containers/Comparator/Comparator.ts
function Comparator_mapStateToProps(store){return{players:store.ttData.players,matches:store.ttData.matches};}/* harmony default export */ var containers_Comparator_Comparator = (Object(es["b" /* connect */])(Comparator_mapStateToProps,{})(components_Comparator_Comparator));
// CONCATENATED MODULE: ./src/containers/Comparator/index.ts

// CONCATENATED MODULE: ./src/components/Navbar/Navbar.tsx
/**
 * QuickHit's navbar.
 */function Navbar_Navbar(){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"tt-navbar",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */],{stackable:true,inverted:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.HOME),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Item,{as:"a",header:true,className:"header",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"table tennis",size:"big"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"chevron right",size:"tiny"}),"Quick",/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"header-hit",children:"Hit"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.HOME),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Item,{as:"a",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"home"}),"Home"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.LADDER),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Item,{as:"a",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"list"}),"Ladder"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.TOURNAMENT),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Item,{as:"a",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"}),"Tournament"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.RECENT_GAMES),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Item,{as:"a",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"history"}),"Recent games"]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Menu["a" /* default */].Menu,{position:"right",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_Chat_Chat,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_NewEditPlayer_NewEditPlayer,{customModalOpenElement:/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",icon:"user plus"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_NewGame_NewGame,{customModalOpenElement:/*#__PURE__*/Object(jsx_runtime["jsx"])(Menu["a" /* default */].Item,{as:"a",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"new-game-icon-navbar",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"game"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"plus",size:"tiny"})]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_Comparator_Comparator,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_Settings_Settings,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_KeyPrompt_KeyPrompt,{})]})]})});}/* harmony default export */ var components_Navbar_Navbar = (Navbar_Navbar);
// CONCATENATED MODULE: ./src/containers/Ladder/Ladder.ts
function Ladder_mapStateToProps(store){return{loading:store.ttData.loading,players:store.ttData.players,matches:store.ttData.matches,refresh:store.ttData.refresh,happyHour:store.ttData.happyHour,badges:store.ttData.badges,tournaments:store.ttData.tournaments,hideZeroGamePlayers:store.viewStore.hideZeroGamePlayers,showCards:store.viewStore.showCards,disableMusic:store.viewStore.disableMusic,darkMode:store.viewStore.darkMode,username:store.viewStore.username};}function Ladder_mapDispatchToProps(dispatch){return{setForceRefresh:function setForceRefresh(newRefresh){return dispatch(setRefresh(newRefresh));},setHideZeroGamePlayers:function setHideZeroGamePlayers(hideZeroGamePlayers){return dispatch(setZeroGamesFilter(hideZeroGamePlayers));},setShowCards:function setShowCards(showCards){return dispatch(ViewActions_setShowCards(showCards));}};}/* harmony default export */ var containers_Ladder_Ladder = (Object(es["b" /* connect */])(Ladder_mapStateToProps,Ladder_mapDispatchToProps)(components_Ladder_Ladder));
// CONCATENATED MODULE: ./src/containers/Ladder/index.ts

// EXTERNAL MODULE: ./src/components/RecentGames/RecentGames.css
var RecentGames = __webpack_require__(557);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/addons/Pagination/Pagination.js
var Pagination = __webpack_require__(751);

// CONCATENATED MODULE: ./src/components/RecentGames/RecentGames.tsx
function RecentGames_RecentGames(props){var PAGE_SIZE=5;// Track this in state, as we may potentially filter the matches to only be focused ones.
var _React$useState=react_default.a.useState(props.matches),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),matches=_React$useState2[0],setMatches=_React$useState2[1];var _React$useState3=react_default.a.useState(1),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),currentPage=_React$useState4[0],setCurrentPage=_React$useState4[1];// Runs on mount.
Object(react["useEffect"])(function(){sortAndFilterMatches();},[]);// When the matches change, re-sort them.
Object(react["useEffect"])(function(){sortAndFilterMatches();},[props.matches]);var sortAndFilterMatches=function sortAndFilterMatches(){var sortedAndFilteredMatches=props.matches;// Determine which matches will make up our Recent Games set on mount to save performance.
// If we are focusing on a player, do the filter now.
if(props.focusedPlayerId){sortedAndFilteredMatches=sortedAndFilteredMatches.filter(function(match){return match.winning_player_id===props.focusedPlayerId||match.losing_player_id===props.focusedPlayerId;});}// Sort list from newest to oldest
sortedAndFilteredMatches=sortedAndFilteredMatches.sort(function(matchA,matchB){return new Date(matchB.date).getTime()-new Date(matchA.date).getTime();});// Set this filtered and sorted match object in state, for later use.
setMatches(sortedAndFilteredMatches);};var getMatchEvents=function getMatchEvents(){if(matches.length===0||props.players.length===0){return[];}var events=[];var playersMap=getPlayersMap(props.players);// Use index access for pagination, with a max result size of PAGE_SIZE and offset generated by the current page
// * page-size.
// - 1 as `currentPage` starts at 1, but we actually start at 0 for our page offset calculations.
var offset=(currentPage-1)*PAGE_SIZE;var nextPageOffset=currentPage*PAGE_SIZE;for(var i=offset;i<nextPageOffset;i++){if(i>matches.length-1){break;}var match=matches[i];var winningPlayer=playersMap.get(match.winning_player_id);var losingPlayer=playersMap.get(match.losing_player_id);if(!(winningPlayer&&losingPlayer)){break;}events.push({key:match.id,meta:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"event-content",children:[winningPlayer.name," (",match.winning_player_original_elo,/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"elo-gain",children:["+",match.winner_new_elo-match.winning_player_original_elo,"=",match.winner_new_elo]}),") defeated ",losingPlayer.name," (",match.losing_player_original_elo,/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"elo-loss",children:["-",match.losing_player_original_elo-match.loser_new_elo,"=",match.loser_new_elo]}),") ",/*#__PURE__*/Object(jsx_runtime["jsx"])(ReactTimeAgo["a" /* default */],{date:new Date(match.date)}),"...",/*#__PURE__*/Object(jsx_runtime["jsx"])(Divider["a" /* default */],{})]}),date:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"event-date",children:new Date(match.date).toDateString()}),content:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"event-summary",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:winningPlayer.icon,color:"green"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"game-winner",children:[winningPlayer.name," "]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"game-winner",children:["(",match.winning_player_score,")"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"chevron right",color:"orange"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:losingPlayer.icon,color:"red"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"game-loser",children:[losingPlayer.name," "]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"game-loser",children:["(",match.losing_player_score,")"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"happy-hour",children:match.happy_hour&&/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"smile"}),"Happy hour!"]})})]}),icon:winningPlayer.icon});}return events;};var getTotalPages=function getTotalPages(){return Math.max(Math.ceil(matches.length/PAGE_SIZE),1);};var handlePageChange=function handlePageChange(event,data){setCurrentPage(data.activePage);};return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"recent-games",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"history",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Recent games"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:!props.loading,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Feed["a" /* default */],{className:"games-feed",events:getMatchEvents()}),/* Show pagination if number of pages is greater than 1 */getTotalPages()>1&&/*#__PURE__*/Object(jsx_runtime["jsx"])(Pagination["a" /* default */],{totalPages:getTotalPages(),defaultActivePage:1,onPageChange:handlePageChange,siblingRange:0,firstItem:null,lastItem:null})]})})]});}/* harmony default export */ var components_RecentGames_RecentGames = (RecentGames_RecentGames);
// CONCATENATED MODULE: ./src/containers/RecentGames/RecentGames.ts
function RecentGames_mapStateToProps(store,ownProps){return{loading:store.ttData.loading,players:store.ttData.players,matches:store.ttData.matches,refresh:store.ttData.refresh,happyHour:store.ttData.happyHour,badges:store.ttData.badges,tournaments:store.ttData.tournaments,focusedPlayerId:ownProps.focusedPlayerId};}/* harmony default export */ var containers_RecentGames_RecentGames = (Object(es["b" /* connect */])(RecentGames_mapStateToProps,mapTTDispatchToProps)(components_RecentGames_RecentGames));
// CONCATENATED MODULE: ./src/containers/RecentGames/index.ts

// EXTERNAL MODULE: ./src/components/PlayerStatistics/PlayerStatistics.css
var PlayerStatistics = __webpack_require__(558);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Popup/Popup.js + 62 modules
var Popup = __webpack_require__(764);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/views/Statistic/Statistic.js
var Statistic = __webpack_require__(453);

// CONCATENATED MODULE: ./src/components/PlayerStatistics/AchievementFeed.tsx
function AchievementFeed(props){var PAGE_SIZE=5;var _React$useState=react_default.a.useState([]),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),achievements=_React$useState2[0],setAchievements=_React$useState2[1];var _React$useState3=react_default.a.useState(1),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),currentPage=_React$useState4[0],setCurrentPage=_React$useState4[1];// Runs on mount.
Object(react["useEffect"])(function(){sortAndFilterAchievements();},[]);// When achievements change, re-sort them.
Object(react["useEffect"])(function(){sortAndFilterAchievements();},[props.badges]);var sortAndFilterAchievements=function sortAndFilterAchievements(){// Only include badges involving this player.
var relevantBadges=props.badges.filter(function(badge){return badge.player_id===props.focusedPlayerId;});// Sort list from newest to oldest
relevantBadges.sort(function(badgeA,badgeB){return new Date(badgeB.date).getTime()-new Date(badgeA.date).getTime();});// Set it in state.
setAchievements(relevantBadges);};// Calculate the global percentage of players who have obtained this achievement.
var calculateAttainmentPercentage=function calculateAttainmentPercentage(focusedBadge){var badgeHolders=props.badges.filter(function(badge){return badge.key===focusedBadge.key;});var percentage=badgeHolders.length/props.players.length*100;return percentage;};// Obtain a feed of achievements that the focused player has obtained.
var getAchievements=function getAchievements(){if(achievements.length===0||props.players.length===0){return[];}var events=[];var playersMap=getPlayersMap(props.players);// Use index access for pagination, with a max result size of PAGE_SIZE and offset generated by the current page
// * page-size.
// - 1 as `currentPage` starts at 1, but we actually start at 0 for our page offset calculations.
var offset=(currentPage-1)*PAGE_SIZE;var nextPageOffset=currentPage*PAGE_SIZE;for(var i=offset;i<nextPageOffset;i++){if(i>achievements.length-1){break;}var badge=achievements[i];var involvedPlayer=playersMap.get(badge.involved_player);var attainmentPercentage=calculateAttainmentPercentage(badge);events.push({key:badge.id,meta:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"event-summary",children:[badge.text,/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:attainmentPercentage<10?"achievement-stats-rare":"achievement-stats",children:[attainmentPercentage.toFixed(1),"% of players have this achievement"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Divider["a" /* default */],{})]}),date:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"event-date",children:[new Date(badge.date).toDateString()," during a match against:"," ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:involvedPlayer===null||involvedPlayer===void 0?void 0:involvedPlayer.icon})," ",involvedPlayer===null||involvedPlayer===void 0?void 0:involvedPlayer.name]}),content:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"event-content",children:badge.title}),icon:badge.icon});}return events;};var getTotalPages=function getTotalPages(){return Math.max(Math.ceil(achievements.length/PAGE_SIZE),1);};var handlePageChange=function handlePageChange(event,data){setCurrentPage(data.activePage);};return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"achievements",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy",circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:"Achievements"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Feed["a" /* default */],{className:"achievements-feed",events:getAchievements()}),/* Show pagination if number of pages is greater than 1 */getTotalPages()>1&&/*#__PURE__*/Object(jsx_runtime["jsx"])(Pagination["a" /* default */],{totalPages:getTotalPages(),defaultActivePage:1,onPageChange:handlePageChange,siblingRange:0,firstItem:null,lastItem:null})]});}/* harmony default export */ var PlayerStatistics_AchievementFeed = (AchievementFeed);
// CONCATENATED MODULE: ./src/containers/AchievementFeed/AchievementFeed.ts
function AchievementFeed_mapStateToProps(store,ownProps){return{loading:store.ttData.loading,players:store.ttData.players,matches:store.ttData.matches,refresh:store.ttData.refresh,happyHour:store.ttData.happyHour,badges:store.ttData.badges,tournaments:store.ttData.tournaments,focusedPlayerId:ownProps.focusedPlayerId};}/* harmony default export */ var AchievementFeed_AchievementFeed = (Object(es["b" /* connect */])(mapTTDataToProps,mapTTDispatchToProps)(PlayerStatistics_AchievementFeed));
// CONCATENATED MODULE: ./src/containers/AchievementFeed/index.ts

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 2 modules
var toConsumableArray = __webpack_require__(22);

// EXTERNAL MODULE: ./node_modules/recharts/es6/component/ResponsiveContainer.js
var ResponsiveContainer = __webpack_require__(759);

// EXTERNAL MODULE: ./node_modules/recharts/es6/chart/LineChart.js
var LineChart = __webpack_require__(760);

// EXTERNAL MODULE: ./node_modules/recharts/es6/cartesian/XAxis.js
var XAxis = __webpack_require__(477);

// EXTERNAL MODULE: ./node_modules/recharts/es6/cartesian/YAxis.js
var YAxis = __webpack_require__(478);

// EXTERNAL MODULE: ./node_modules/recharts/es6/cartesian/Line.js + 2 modules
var Line = __webpack_require__(482);

// EXTERNAL MODULE: ./node_modules/recharts/es6/cartesian/ReferenceLine.js
var ReferenceLine = __webpack_require__(469);

// EXTERNAL MODULE: ./node_modules/recharts/es6/component/Tooltip.js + 1 modules
var Tooltip = __webpack_require__(286);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Accordion/Accordion.js
var Accordion = __webpack_require__(405);

// EXTERNAL MODULE: ./src/components/PlayerStatistics/ELOGraph.css
var ELOGraph = __webpack_require__(559);

// CONCATENATED MODULE: ./src/components/PlayerStatistics/ELOGraph.tsx
var ELOGraph_CustomTooltip=function CustomTooltip(_ref){var active=_ref.active,payload=_ref.payload,label=_ref.label;if(active){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"custom-tooltip",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("p",{className:"label",children:"Date: ".concat(new Date(label).toLocaleString())}),/*#__PURE__*/Object(jsx_runtime["jsx"])("p",{className:"info",children:"ELO: ".concat(payload===null||payload===void 0?void 0:payload[0].value)}),/*#__PURE__*/Object(jsx_runtime["jsx"])("p",{className:"info",children:payload===null||payload===void 0?void 0:payload[0].payload.matchStr})]});}return null;};function ELOGraph_ELOGraph(props){var graphStats=getGraphStatsForPlayer(props.player.id,props.matches,props.players);var minELO=Math.min.apply(Math,Object(toConsumableArray["a" /* default */])(graphStats.map(function(stat){return stat.ELO;})));var maxELO=Math.max.apply(Math,Object(toConsumableArray["a" /* default */])(graphStats.map(function(stat){return stat.ELO;})));var _useState=Object(react["useState"])(true),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),showEloGraph=_useState2[0],setShowEloGraph=_useState2[1];function toggleEloGraph(){setShowEloGraph(!showEloGraph);}return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Accordion["a" /* default */],{className:"elo-graph-acc",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Accordion["a" /* default */].Title,{active:showEloGraph,onClick:toggleEloGraph,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"elo-graph-label",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"dropdown"}),"Elo/Time",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"line graph"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Accordion["a" /* default */].Content,{active:showEloGraph,children:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"elo-graph",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(ResponsiveContainer["a" /* ResponsiveContainer */],{width:"80%",height:"100%",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(LineChart["a" /* LineChart */],{data:graphStats,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(XAxis["a" /* XAxis */],{dataKey:"date",type:"category",minTickGap:500,tickFormatter:function tickFormatter(tickItem){return new Date(tickItem).toLocaleString();}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(YAxis["a" /* YAxis */],{yAxisId:"1",domain:[minELO-50,maxELO+50]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Line["a" /* Line */],{type:"monotone",dataKey:"ELO",stroke:"#8884d8",yAxisId:"1"}),graphStats.length>1&&/*#__PURE__*/Object(jsx_runtime["jsx"])(ReferenceLine["a" /* ReferenceLine */],{yAxisId:"1",y:maxELO,label:{value:"All time high",fill:"white"},stroke:"#21ba45",strokeDasharray:"3 3"}),graphStats.length>1&&/*#__PURE__*/Object(jsx_runtime["jsx"])(ReferenceLine["a" /* ReferenceLine */],{yAxisId:"1",y:minELO,label:{value:"All time low",fill:"white"},stroke:"red",strokeDasharray:"3 3"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Tooltip["a" /* Tooltip */],{content:/*#__PURE__*/Object(jsx_runtime["jsx"])(ELOGraph_CustomTooltip,{})})]})})})})]})});}
// CONCATENATED MODULE: ./src/components/PlayerStatistics/PlayerStatistics.tsx
function PlayerStatistics_PlayerStatistics(props){var _player$tournamentWin,_player$tournamentRun;var playersMap=getPlayersMap(props.players);var player=playersMap.get(props.match.params.playerId);var extraStats=player?QHDataLoader_getExtraPlayerStats(player.id,props.matches):{wins:0,losses:0,minELO:0,maxELO:0,formGuide:""};var victim=extraStats.victim?playersMap.get(extraStats.victim):undefined;var nemesis=extraStats.nemesis?playersMap.get(extraStats.nemesis):undefined;return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"player-statistics",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Transition["a" /* default */],{visible:!props.loading,children:!player?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"error",children:["Player ",props.match.params.playerId," does not exist."]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Header["a" /* default */],{as:"h2",icon:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:player.icon,circular:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[player.name,/*#__PURE__*/Object(jsx_runtime["jsx"])(components_NewEditPlayer_NewEditPlayer,{editingPlayer:player,customModalOpenElement:/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"pencil",size:"tiny",className:"edit-icon"}),onRequestMade:function onRequestMade(){return props.setForceRefresh(true);}})]})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"player-stats-wrapper",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(ELOGraph_ELOGraph,{player:player,matches:props.matches,players:props.players}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"tournament-win-count",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Popup["a" /* default */],{content:"Tournament wins",trigger:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy",color:"yellow"})," x ",(_player$tournamentWin=player.tournamentWins)!==null&&_player$tournamentWin!==void 0?_player$tournamentWin:0]}),position:"bottom center"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Popup["a" /* default */],{content:"Tournament runner ups",trigger:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy",color:"grey"})," x ",(_player$tournamentRun=player.tournamentRunnerUps)!==null&&_player$tournamentRun!==void 0?_player$tournamentRun:0]}),position:"bottom center"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Statistic["a" /* default */].Group,{className:"statistics-group",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Min rating",value:extraStats.minELO,className:"min-elo"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Rating",value:player.elo}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Max rating",value:extraStats.maxELO,className:"max-elo"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Statistic["a" /* default */].Group,{className:"statistics-group",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Wins",value:extraStats.wins,className:"wins"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Losses",value:extraStats.losses,className:"losses"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"W/L ratio",value:"".concat(Math.round(extraStats.wins/(extraStats.wins+extraStats.losses)*100),"%")}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Games played",value:extraStats.wins+extraStats.losses})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Statistic["a" /* default */].Group,{className:"statistics-group",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Victim",value:victim?/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:victim,winLoss:getRecordAgainstPlayer(player.id,victim.id,props.matches)}):/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:player,winLoss:{wins:extraStats.wins,losses:extraStats.losses,formGuide:extraStats.formGuide}}),className:"victim"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Statistic["a" /* default */],{label:"Nemesis",value:nemesis?/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:nemesis,winLoss:getRecordAgainstPlayer(player.id,nemesis.id,props.matches)}):/*#__PURE__*/Object(jsx_runtime["jsx"])(Ladder_PlayerCard_PlayerCard,{player:player,winLoss:{wins:extraStats.wins,losses:extraStats.losses,formGuide:extraStats.formGuide}}),className:"nemesis"})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */],{columns:2,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_RecentGames_RecentGames,{focusedPlayerId:player.id})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(AchievementFeed_AchievementFeed,{focusedPlayerId:player.id})})]})]})})});}/* harmony default export */ var components_PlayerStatistics_PlayerStatistics = (PlayerStatistics_PlayerStatistics);
// CONCATENATED MODULE: ./src/containers/PlayerStatistics/PlayerStatistics.ts
/* harmony default export */ var containers_PlayerStatistics_PlayerStatistics = (Object(es["b" /* connect */])(mapTTDataToProps,mapTTDispatchToProps)(components_PlayerStatistics_PlayerStatistics));
// CONCATENATED MODULE: ./src/containers/PlayerStatistics/index.ts

// CONCATENATED MODULE: ./src/containers/QHDataLoader/QHDataLoader.ts
function QHDataLoader_mapDispatchToProps(dispatch){return{setMatches:function setMatches(newMatches){return dispatch(TTActions_setMatches(newMatches));},setPlayers:function setPlayers(newPlayers){return dispatch(TTActions_setPlayers(newPlayers));},setHappyHour:function setHappyHour(newHappyHour){return dispatch(TTActions_setHappyHour(newHappyHour));},setLoading:function setLoading(newLoading){return dispatch(TTActions_setLoading(newLoading));},setForceRefresh:function setForceRefresh(newRefresh){return dispatch(setRefresh(newRefresh));},setBadges:function setBadges(newBadges){return dispatch(TTActions_setBadges(newBadges));},setTournaments:function setTournaments(newTournaments){return dispatch(TTActions_setTournaments(newTournaments));}};}/* harmony default export */ var containers_QHDataLoader_QHDataLoader = (Object(es["b" /* connect */])(mapTTDataToProps,QHDataLoader_mapDispatchToProps)(QHDataLoader_QHDataLoader));
// CONCATENATED MODULE: ./src/containers/QHDataLoader/index.ts

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Label/Label.js
var Label = __webpack_require__(170);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Message/Message.js
var Message = __webpack_require__(753);

// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Dropdown/Dropdown.js + 15 modules
var Dropdown = __webpack_require__(233);

// EXTERNAL MODULE: ./src/components/Tournament/Tournament.css
var Tournament = __webpack_require__(693);

// EXTERNAL MODULE: ./src/components/Tournament/NewTournament/NewTournament.css
var NewTournament = __webpack_require__(694);

// CONCATENATED MODULE: ./src/types/types.ts
var TournamentParticipantsType;(function(TournamentParticipantsType){TournamentParticipantsType["STANDARD"]="Standard";TournamentParticipantsType["REVERSE"]="Reverse";})(TournamentParticipantsType||(TournamentParticipantsType={}));var TournamentType;(function(TournamentType){TournamentType["SINGLE"]="Single Elimination";TournamentType["DOUBLE"]="Double Elimination";TournamentType["AFL"]="AFL-style";})(TournamentType||(TournamentType={}));
// CONCATENATED MODULE: ./src/components/Tournament/NewTournament/NewTournament.tsx
function NewTournament_NewTournament(props){var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),startingNewTournament=_useState2[0],setStartingNewTournament=_useState2[1];var _useState3=Object(react["useState"])(""),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),newTournamentName=_useState4[0],setNewTournamentName=_useState4[1];var _useState5=Object(react["useState"])(TournamentParticipantsType.STANDARD),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),newTournamentParticipantsType=_useState6[0],setParticipantsType=_useState6[1];var _useState7=Object(react["useState"])(TournamentType.SINGLE),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),newTournamentType=_useState8[0],setTournamentType=_useState8[1];var startNewTournament=function startNewTournament(){var onSuccess=function onSuccess(){Toast_makeSuccessToast("Tournament started!","A new tournament ".concat(name," has been started!"));setStartingNewTournament(false);props.onClose();};var onError=function onError(errorMsg){Toast_makeErrorToast("Could not start tournament",errorMsg);setStartingNewTournament(false);};setStartingNewTournament(true);var players=Object(toConsumableArray["a" /* default */])(props.sortedPlayers);if(newTournamentParticipantsType===TournamentParticipantsType.REVERSE){players.reverse();}var tournamentMatches=[];if(newTournamentType===TournamentType.AFL){tournamentMatches.push({match_number:0,home_player_id:players[0].id,away_player_id:players[3].id},{match_number:1,home_player_id:players[4].id,away_player_id:players[7].id},{match_number:2,home_player_id:players[5].id,away_player_id:players[6].id},{match_number:3,home_player_id:players[1].id,away_player_id:players[2].id});}else{tournamentMatches.push({match_number:0,home_player_id:players[0].id,away_player_id:players[7].id},{match_number:1,home_player_id:players[3].id,away_player_id:players[4].id},{match_number:2,home_player_id:players[1].id,away_player_id:players[6].id},{match_number:3,home_player_id:players[2].id,away_player_id:players[5].id});}var newTournament={id:Object(v4["a" /* default */])(),name:newTournamentName,start_date:Tournament_getISODate(),matches:tournamentMatches,participants:newTournamentParticipantsType,type:newTournamentType};QuickHitAPI_QuickHitAPI.addUpdateTournament(newTournament,onSuccess,onError);};var getLadderTableRows=function getLadderTableRows(){var ladderPlayers=Object(toConsumableArray["a" /* default */])(props.sortedPlayers);if(newTournamentParticipantsType===TournamentParticipantsType.REVERSE){ladderPlayers.reverse();}var tableRows=[];for(var i=0;i<ladderPlayers.length;++i){tableRows.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{positive:i<=7,negative:i>=8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:i+1}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Cell,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:ladderPlayers[i].icon})," ",ladderPlayers[i].name]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:ladderPlayers[i].elo})]}));}return tableRows;};return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:props.onClose,open:props.isOpen,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:["Start new tournament ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Grid["a" /* default */],{id:"contentGrid",divided:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"content-column",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{onSubmit:function onSubmit(){return startNewTournament();},children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{label:"Tournament name",onChange:function onChange(event,data){return setNewTournamentName(data.value);},required:true}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Group,{inline:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("label",{children:"Tournament participants"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{label:"Standard",value:TournamentParticipantsType.STANDARD,checked:newTournamentParticipantsType===TournamentParticipantsType.STANDARD,onChange:function onChange(event,_ref){var value=_ref.value;return setParticipantsType(value);}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{label:"Reverse",value:TournamentParticipantsType.REVERSE,checked:newTournamentParticipantsType===TournamentParticipantsType.REVERSE,onChange:function onChange(event,_ref2){var value=_ref2.value;return setParticipantsType(value);}})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Field,{label:"Tournament type"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{label:"Single elimination",value:TournamentType.SINGLE,checked:newTournamentType===TournamentType.SINGLE,onChange:function onChange(event,_ref3){var value=_ref3.value;return setTournamentType(value);}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{label:"Double elimination",value:TournamentType.DOUBLE,checked:newTournamentType===TournamentType.DOUBLE,onChange:function onChange(event,_ref4){var value=_ref4.value;return setTournamentType(value);}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Radio,{label:"AFL-style",value:TournamentType.AFL,checked:newTournamentType===TournamentType.AFL,onChange:function onChange(event,_ref5){var value=_ref5.value;return setTournamentType(value);}}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Button,{disabled:!newTournamentName||startingNewTournament,id:"newTournamentBtn",children:["Start tournament with these top 8 players  ",startingNewTournament?/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{loading:true,name:"spinner"}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{})]})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Grid["a" /* default */].Column,{className:"content-column",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{id:"newTournamentLadderScroller",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */],{id:"newTournamentLadderTable",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Header,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Ladder position"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Player name"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Player ELO"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Body,{children:getLadderTableRows()})]})})})]})})]});}/* harmony default export */ var Tournament_NewTournament_NewTournament = (NewTournament_NewTournament);
// EXTERNAL MODULE: ./src/components/Tournament/EnterTournamentGame/EnterTournamentGame.css
var EnterTournamentGame = __webpack_require__(695);

// CONCATENATED MODULE: ./src/components/Tournament/EnterTournamentGame/EnterTournamentGame.tsx
function EnterTournamentGame_EnterTournamentGame(props){var _useState=Object(react["useState"])(undefined),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),homePlayerEnteringScore=_useState2[0],setHomePlayerEnteringScore=_useState2[1];var _useState3=Object(react["useState"])(undefined),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),awayPlayerEnteringScore=_useState4[0],setAwayPlayerEnteringScore=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),confirmingMatchScore=_useState6[0],setConfirmingMatchScore=_useState6[1];var endTournament=function endTournament(matchEntering,homeWon,onError){var matchWinnerId=homeWon?matchEntering.home_player_id:matchEntering.away_player_id;var matchLoserId=homeWon?matchEntering.away_player_id:matchEntering.home_player_id;props.currentTournament.end_date=Tournament_getISODate();var tournamentWinner=props.playersMap.get(matchWinnerId);var tournamentRunnerUp=props.playersMap.get(matchLoserId);if(tournamentWinner&&tournamentRunnerUp){if(tournamentWinner.tournamentWins){++tournamentWinner.tournamentWins;}else{tournamentWinner.tournamentWins=1;}if(tournamentRunnerUp.tournamentRunnerUps){++tournamentRunnerUp.tournamentRunnerUps;}else{tournamentRunnerUp.tournamentRunnerUps=1;}var onPlayerUpdateFailure=function onPlayerUpdateFailure(errorMsg){onError(errorMsg);return;};QuickHitAPI_QuickHitAPI.addOrUpdatePlayer(tournamentWinner,function(){/* Do nothing on success. */},onPlayerUpdateFailure);QuickHitAPI_QuickHitAPI.addOrUpdatePlayer(tournamentRunnerUp,function(){/* Do nothing on success. */},onPlayerUpdateFailure);AchievementChecker_generateTournamentAchievements(props.currentTournament.name,tournamentWinner,tournamentRunnerUp,onError);}};var updateMatchAndTournament=function updateMatchAndTournament(){var onSuccess=function onSuccess(){setHomePlayerEnteringScore(undefined);setAwayPlayerEnteringScore(undefined);Toast_makeSuccessToast("Game entered!","The tournament marches on!");props.onClose();setConfirmingMatchScore(false);props.refresh();};var onError=function onError(errorMsg){Toast_makeErrorToast("Game not entered!",errorMsg);setConfirmingMatchScore(false);props.refresh();};setConfirmingMatchScore(true);// Should never be true.
if(!props.matchEntering){Toast_makeErrorToast("Come on man","You've got to be entering a score");setConfirmingMatchScore(false);return;}// Also should never be true.
if(homePlayerEnteringScore===undefined||awayPlayerEnteringScore===undefined){Toast_makeErrorToast("Come on man","You've got to enter a score");setConfirmingMatchScore(false);props.refresh();return;}if(homePlayerEnteringScore===awayPlayerEnteringScore){Toast_makeErrorToast("Come on man","Winning player score must be higher than losing player score");setConfirmingMatchScore(false);props.refresh();return;}props.matchEntering.home_score=homePlayerEnteringScore;props.matchEntering.away_score=awayPlayerEnteringScore;var homeWon=homePlayerEnteringScore>awayPlayerEnteringScore;var matchWinnerId=homeWon?props.matchEntering.home_player_id:props.matchEntering.away_player_id;var matchLoserId=homeWon?props.matchEntering.away_player_id:props.matchEntering.home_player_id;if(props.currentTournament.type&&props.currentTournament.type===TournamentType.DOUBLE){// Add the winner's ID (and loser's ID, if it's their first loss) to their next match.
switch(props.matchEntering.match_number){case 0:updateFutureTournamentMatch(6,matchWinnerId,true);updateFutureTournamentMatch(4,matchLoserId,true);break;case 1:updateFutureTournamentMatch(6,matchWinnerId,false);updateFutureTournamentMatch(4,matchLoserId,false);break;case 2:updateFutureTournamentMatch(7,matchWinnerId,true);updateFutureTournamentMatch(5,matchLoserId,true);break;case 3:updateFutureTournamentMatch(7,matchWinnerId,false);updateFutureTournamentMatch(5,matchLoserId,false);break;case 4:updateFutureTournamentMatch(9,matchWinnerId,false);break;case 5:updateFutureTournamentMatch(8,matchWinnerId,false);break;case 6:updateFutureTournamentMatch(11,matchWinnerId,true);updateFutureTournamentMatch(8,matchLoserId,true);break;case 7:updateFutureTournamentMatch(11,matchWinnerId,false);updateFutureTournamentMatch(9,matchLoserId,true);break;case 8:updateFutureTournamentMatch(10,matchWinnerId,false);break;case 9:updateFutureTournamentMatch(10,matchWinnerId,true);break;case 10:updateFutureTournamentMatch(12,matchWinnerId,false);break;case 11:updateFutureTournamentMatch(13,matchWinnerId,true);updateFutureTournamentMatch(12,matchLoserId,true);break;case 12:updateFutureTournamentMatch(13,matchWinnerId,false);break;case 13:// If the last game is being entered, then the tournament is over, and we can add its end date.
endTournament(props.matchEntering,homeWon,onError);break;}}else if(props.currentTournament.type&&props.currentTournament.type===TournamentType.AFL){// Add the winner's ID (and loser's ID, if it's they have the double chance) to their next match.
switch(props.matchEntering.match_number){case 0:updateFutureTournamentMatch(6,matchWinnerId,true);updateFutureTournamentMatch(4,matchLoserId,true);break;case 1:updateFutureTournamentMatch(4,matchWinnerId,false);break;case 2:updateFutureTournamentMatch(5,matchWinnerId,false);break;case 3:updateFutureTournamentMatch(7,matchWinnerId,true);updateFutureTournamentMatch(5,matchLoserId,true);break;case 4:updateFutureTournamentMatch(7,matchWinnerId,false);break;case 5:updateFutureTournamentMatch(6,matchWinnerId,false);break;case 6:updateFutureTournamentMatch(8,matchWinnerId,true);break;case 7:updateFutureTournamentMatch(8,matchWinnerId,false);break;case 8:// If the grand final is being entered, then the tournament is over, and we can add its end date.
endTournament(props.matchEntering,homeWon,onError);break;}}else{// Add the winner's ID to their next match.
switch(props.matchEntering.match_number){case 0:updateFutureTournamentMatch(4,matchWinnerId,true);break;case 1:updateFutureTournamentMatch(4,matchWinnerId,false);break;case 2:updateFutureTournamentMatch(5,matchWinnerId,true);break;case 3:updateFutureTournamentMatch(5,matchWinnerId,false);break;case 4:updateFutureTournamentMatch(6,matchWinnerId,true);break;case 5:updateFutureTournamentMatch(6,matchWinnerId,false);break;case 6:// If the last game is being entered, then the tournament is over, and we can add its end date.
endTournament(props.matchEntering,homeWon,onError);break;}}QuickHitAPI_QuickHitAPI.addUpdateTournament(props.currentTournament,onSuccess,onError);};var updateFutureTournamentMatch=function updateFutureTournamentMatch(futureMatchIndex,futurePlayerId,winnerWillBeHome){// If the future match already exists, just add the winner's ID to it. Otherwise, make the new match, with the winner's ID.
if(props.currentTournament.matches[futureMatchIndex]){if(winnerWillBeHome){props.currentTournament.matches[futureMatchIndex].home_player_id=futurePlayerId;}else{props.currentTournament.matches[futureMatchIndex].away_player_id=futurePlayerId;}}else{if(winnerWillBeHome){props.currentTournament.matches[futureMatchIndex]={match_number:futureMatchIndex,home_player_id:futurePlayerId,away_player_id:""};}else{props.currentTournament.matches[futureMatchIndex]={match_number:futureMatchIndex,home_player_id:"",away_player_id:futurePlayerId};}}};return/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:props.onClose,open:props.isOpen,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Header,{children:"Enter tournament game"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */],{onSubmit:updateMatchAndTournament,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Group,{widths:"equal",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{className:"tournament-score-input",label:props.homePlayerEntering+"'s score",type:"number",min:0,value:homePlayerEnteringScore,onChange:function onChange(event,data){return setHomePlayerEnteringScore(parseInt(data.value));},required:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Form["a" /* default */].Input,{className:"tournament-score-input",label:props.awayPlayerEntering+"'s score",type:"number",min:0,value:awayPlayerEnteringScore,onChange:function onChange(event,data){return setAwayPlayerEnteringScore(parseInt(data.value));},required:true})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Form["a" /* default */].Button,{className:"confirm-score-button",disabled:homePlayerEnteringScore===undefined||awayPlayerEnteringScore===undefined||confirmingMatchScore,children:["Confirm score  ",confirmingMatchScore?/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{loading:true,name:"spinner"}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{})]})]})})]});}/* harmony default export */ var Tournament_EnterTournamentGame_EnterTournamentGame = (EnterTournamentGame_EnterTournamentGame);
// CONCATENATED MODULE: ./src/components/Tournament/Tournament.tsx
function Tournament_Tournament(props){var _props$chosenInstance,_sortedTournaments$0$2,_sortedTournaments$0$3;var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),newTournamentModalOpen=_useState2[0],openNewTournamentModal=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),enterGameModalOpen=_useState4[0],openEnterGameModal=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),recapModalOpen=_useState6[0],openRecapModal=_useState6[1];var _useState7=Object(react["useState"])(""),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),homePlayerEntering=_useState8[0],setHomePlayerEntering=_useState8[1];var _useState9=Object(react["useState"])(""),_useState10=Object(slicedToArray["a" /* default */])(_useState9,2),awayPlayerEntering=_useState10[0],setAwayPlayerEntering=_useState10[1];var _useState11=Object(react["useState"])(undefined),_useState12=Object(slicedToArray["a" /* default */])(_useState11,2),matchEntering=_useState12[0],setMatchEntering=_useState12[1];var _useState13=Object(react["useState"])(false),_useState14=Object(slicedToArray["a" /* default */])(_useState13,2),viewPastModalOpen=_useState14[0],openViewPastModal=_useState14[1];// Music by Karl Casey @ White Bat Audio.
var _useState15=Object(react["useState"])(new Audio("/quick-hit"+"/past-tournaments-music-synth.mp3")),_useState16=Object(slicedToArray["a" /* default */])(_useState15,1),pastTournamentsAudioSynth=_useState16[0];// Music by Luxury Elite.
var _useState17=Object(react["useState"])(new Audio("/quick-hit"+"/past-tournaments-music-vapour.mp3")),_useState18=Object(slicedToArray["a" /* default */])(_useState17,1),pastTournamentsAudioVapour=_useState18[0];// Music by HOME.
var _useState19=Object(react["useState"])(new Audio("/quick-hit"+"/recap-audio.mp3")),_useState20=Object(slicedToArray["a" /* default */])(_useState19,1),recapAudio=_useState20[0];// Music by tuddmusic.
var _useState21=Object(react["useState"])(new Audio("/quick-hit"+"/arcade-synth.mp3")),_useState22=Object(slicedToArray["a" /* default */])(_useState21,1),arcadeAudioSynth=_useState22[0];// Music by Kannibal.
var _useState23=Object(react["useState"])(new Audio("/quick-hit"+"/arcade-vapour.mp3")),_useState24=Object(slicedToArray["a" /* default */])(_useState23,1),arcadeAudioVapour=_useState24[0];pastTournamentsAudioSynth.volume=props.disableMusic?0:0.2;pastTournamentsAudioVapour.volume=props.disableMusic?0:0.2;recapAudio.volume=props.disableMusic?0:0.5;arcadeAudioSynth.volume=props.disableMusic?0:0.2;arcadeAudioVapour.volume=props.disableMusic?0:0.2;pastTournamentsAudioVapour.loop=true;pastTournamentsAudioSynth.loop=true;recapAudio.loop=true;arcadeAudioSynth.loop=true;arcadeAudioVapour.loop=true;var _useState25=Object(react["useState"])(false),_useState26=Object(slicedToArray["a" /* default */])(_useState25,2),secondPastModalOpen=_useState26[0],openSecondPastModal=_useState26[1];var _useState27=Object(react["useState"])(undefined),_useState28=Object(slicedToArray["a" /* default */])(_useState27,2),pastTournamentBeingViewed=_useState28[0],setViewedPastTournament=_useState28[1];var _useState29=Object(react["useState"])(true),_useState30=Object(slicedToArray["a" /* default */])(_useState29,2),synth=_useState30[0],setSynth=_useState30[1];var _useState31=Object(react["useState"])("table"),_useState32=Object(slicedToArray["a" /* default */])(_useState31,2),pastTournamentView=_useState32[0],setPastTournamentView=_useState32[1];// We have to sort the retrieved players and tournaments because using the Firebase REST API's query parameters does
// not guarantee order. Make sure to filter out players who have never played a game, too.
var sortedPlayers=props.players.sort(function(p1,p2){return p2.elo-p1.elo;}).filter(function(player){return props.matches.some(function(match){return match.winning_player_id===player.id||match.losing_player_id===player.id;});});var sortedTournaments=props.tournaments.sort(function(t1,t2){return t2.start_date.localeCompare(t1.start_date);});var playersMap=getPlayersMap(props.players);// Determine what rank the player was in the supplied tournament.
var getPlayerRank=function getPlayerRank(tournament,playerId){if(tournament.type&&tournament.type===TournamentType.AFL){if(tournament.matches[0].home_player_id===playerId)return 1;else if(tournament.matches[0].away_player_id===playerId)return 4;else if(tournament.matches[1].home_player_id===playerId)return 5;else if(tournament.matches[1].away_player_id===playerId)return 8;else if(tournament.matches[2].home_player_id===playerId)return 6;else if(tournament.matches[2].away_player_id===playerId)return 7;else if(tournament.matches[3].home_player_id===playerId)return 2;else return 3;}else{if(tournament.matches[0].home_player_id===playerId)return 1;else if(tournament.matches[0].away_player_id===playerId)return 8;else if(tournament.matches[1].home_player_id===playerId)return 4;else if(tournament.matches[1].away_player_id===playerId)return 5;else if(tournament.matches[2].home_player_id===playerId)return 2;else if(tournament.matches[2].away_player_id===playerId)return 7;else if(tournament.matches[3].home_player_id===playerId)return 3;else return 6;}};var homeWon=function homeWon(match){if(match&&match.home_score!==undefined&&match.away_score!==undefined){return match.home_score>match.away_score;}else{return undefined;}};// Returns the VS button differently depending on the match state. If the match has its players determined, but the match
// has not yet been played, make the button clickable to enter the score. If the match has already been played, make the
// button display the score, and be unclickable. Lastly, if the players for the match are not yet defined, just display
// an unclickable VS.
var getMatchBtn=function getMatchBtn(match){if(match&&match.home_player_id&&match.away_player_id){if(match.home_score===undefined){return/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"enter-game-score-vs",onClick:function onClick(){openGameEntryModal(match);},children:"VS"});}else{return/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"enter-game-score-vs",children:[match.home_score,"-",match.away_score]});}}else{return/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"enter-game-score-vs",children:"VS"});}};var getMatchItem=function getMatchItem(match,playersMap,tournament,homeTbdText,awayTbdText){var _playersMap$get,_playersMap$get2;var vicChance=Predictor_getChanceOfVictory(playersMap.get(match===null||match===void 0?void 0:match.home_player_id),playersMap.get(match===null||match===void 0?void 0:match.away_player_id),props.matches);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:homeWon(match)===false?"match-loser home-player":"home-player",children:(match===null||match===void 0?void 0:match.home_player_id)?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:["(",getPlayerRank(tournament,match.home_player_id),")"," ",(_playersMap$get=playersMap.get(match.home_player_id))===null||_playersMap$get===void 0?void 0:_playersMap$get.name," ",/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"vic-chance",children:["[",vicChance,"%]"]})]}):homeTbdText?/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"custom-tbd",children:homeTbdText}):"TBD"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:match&&match.home_player_id&&match.away_player_id&&match.home_score===undefined?"clickable-vs":"vs",children:getMatchBtn(match)}),/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:homeWon(match)===true?"match-loser":undefined,children:(match===null||match===void 0?void 0:match.away_player_id)?/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:["(",getPlayerRank(tournament,match.away_player_id),")"," ",(_playersMap$get2=playersMap.get(match.away_player_id))===null||_playersMap$get2===void 0?void 0:_playersMap$get2.name," ",/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"vic-chance",children:["[",100-vicChance,"%]"]})]}):awayTbdText?/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"custom-tbd",children:awayTbdText}):"TBD"})]});};var openGameEntryModal=function openGameEntryModal(match){var _playersMap$get3,_playersMap$get4;setMatchEntering(match);setHomePlayerEntering((_playersMap$get3=playersMap.get(match.home_player_id))===null||_playersMap$get3===void 0?void 0:_playersMap$get3.name);setAwayPlayerEntering((_playersMap$get4=playersMap.get(match.away_player_id))===null||_playersMap$get4===void 0?void 0:_playersMap$get4.name);openEnterGameModal(true);};// Returns the icon and name of the winner of the given tournament.
var getWinner=function getWinner(tournament){var finalMatch;if(tournament.type&&tournament.type===TournamentType.DOUBLE){finalMatch=tournament.matches[13];}else if(tournament.type&&tournament.type===TournamentType.AFL){finalMatch=tournament.matches[8];}else{finalMatch=tournament.matches[6];}if(finalMatch&&finalMatch.home_score!==undefined&&finalMatch.away_score!==undefined){var _playersMap$get5,_playersMap$get6;var _homeWon=finalMatch.home_score>finalMatch.away_score;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:(_playersMap$get5=playersMap.get(_homeWon?finalMatch.home_player_id:finalMatch.away_player_id))===null||_playersMap$get5===void 0?void 0:_playersMap$get5.icon}),(_playersMap$get6=playersMap.get(_homeWon?finalMatch.home_player_id:finalMatch.away_player_id))===null||_playersMap$get6===void 0?void 0:_playersMap$get6.name]});}else{return/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:"Who will it be?"});}};var getPastTournamentsTableRows=function getPastTournamentsTableRows(tournaments){var tableRows=[];tournaments.forEach(function(tournament){var _tournament$participa,_tournament$type;tableRows.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{selectable:true,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"past-tournament-expand",onClick:function onClick(){setViewedPastTournament(tournament);openSecondPastModal(true);},children:[tournament.name," ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"external"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:(_tournament$participa=tournament.participants)!==null&&_tournament$participa!==void 0?_tournament$participa:TournamentParticipantsType.STANDARD}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:(_tournament$type=tournament.type)!==null&&_tournament$type!==void 0?_tournament$type:TournamentType.SINGLE}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:tournament.start_date}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:tournament.end_date}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Cell,{children:getWinner(tournament)})]},tournament.id));});return tableRows;};var getHeaders=function getHeaders(tournament){var headers=[];if(tournament.type&&tournament.type===TournamentType.DOUBLE){headers.push(/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Round 1"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Quarter-Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Semi-Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Finals"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("h3",{children:["Winner ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"})]}));}else if(tournament.type&&tournament.type===TournamentType.AFL){headers.push(/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Finals Week 1"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Semi Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Preliminary Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Grand Final"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("h3",{children:["Winner ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"})]}));}else{headers.push(/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Quarter-Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Semi-Finals"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("h3",{children:"Final"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("h3",{children:["Winner ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"trophy"})]}));}return headers;};var getBrackets=function getBrackets(tournament){var brackets=[];if(tournament.type&&tournament.type===TournamentType.DOUBLE){brackets.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-1",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"1"}),getMatchItem(tournament.matches[0],playersMap,tournament)]},0),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"2"}),getMatchItem(tournament.matches[1],playersMap,tournament)]},1),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"3"}),getMatchItem(tournament.matches[2],playersMap,tournament)]},2),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"4"}),getMatchItem(tournament.matches[3],playersMap,tournament)]},3),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"5"}),getMatchItem(tournament.matches[4],playersMap,tournament,"G1 Loser","G2 Loser")]},4),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"6"}),getMatchItem(tournament.matches[5],playersMap,tournament,"G3 Loser","G4 Loser")]},5)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-2",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"7"}),getMatchItem(tournament.matches[6],playersMap,tournament,"G1 Winner","G2 Winner")]},6),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"8"}),getMatchItem(tournament.matches[7],playersMap,tournament,"G3 Winner","G4 Winner")]},7),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"10"}),getMatchItem(tournament.matches[9],playersMap,tournament,"G8 Loser","G5 Winner")]},9),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"9"}),getMatchItem(tournament.matches[8],playersMap,tournament,"G7 Loser","G6 Winner")]},8)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-3",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"12"}),getMatchItem(tournament.matches[11],playersMap,tournament,"G7 Winner","G8 Winner")]},11),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"11"}),getMatchItem(tournament.matches[10],playersMap,tournament,"G10 Winner","G9 Winner")]},10)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-4",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"14"}),getMatchItem(tournament.matches[13],playersMap,tournament,"G12 Winner","G13 Winner")]},13),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item loser",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"13"}),getMatchItem(tournament.matches[12],playersMap,tournament,"G12 Loser","G11 Winner")]},12)]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:"bracket bracket-5",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getWinner(tournament)})}));}else if(tournament.type&&tournament.type===TournamentType.AFL){brackets.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-1",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"QF1"}),getMatchItem(tournament.matches[0],playersMap,tournament)]},0),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"EF1"}),getMatchItem(tournament.matches[1],playersMap,tournament)]},1),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"EF2"}),getMatchItem(tournament.matches[2],playersMap,tournament)]},2),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"QF2"}),getMatchItem(tournament.matches[3],playersMap,tournament)]},3)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-2",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"SF1"}),getMatchItem(tournament.matches[4],playersMap,tournament,"QF1 Loser","EF1 Winner")]},4),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"SF2"}),getMatchItem(tournament.matches[5],playersMap,tournament,"QF2 Loser","EF2 Winner")]},5)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-3",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"PF1"}),getMatchItem(tournament.matches[6],playersMap,tournament,"QF1 Winner","SF2 Winner")]},6),/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"PF2"}),getMatchItem(tournament.matches[7],playersMap,tournament,"QF2 Winner","SF1 Winner")]},7)]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:"bracket bracket-4",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("li",{className:"match-item",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"watermark",children:"GF"}),getMatchItem(tournament.matches[8],playersMap,tournament,"PF1 Winner","PF2 Winner")]},8)}),/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:"bracket bracket-5",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getWinner(tournament)})}));}else{brackets.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-2",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[0],playersMap,tournament)},0),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[1],playersMap,tournament)},1),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[2],playersMap,tournament)},2),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[3],playersMap,tournament)},3)]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{className:"bracket bracket-3",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[4],playersMap,tournament)},4),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[5],playersMap,tournament)},5)]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:"bracket bracket-4",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getMatchItem(tournament.matches[6],playersMap,tournament)},6)}),/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:"bracket bracket-5",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{className:"match-item",children:getWinner(tournament)})}));}return brackets;};var renderTournament=function renderTournament(tournament){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"tournament-container",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"tournament-headers",children:getHeaders(tournament)}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:tournament.type&&tournament.type!==TournamentType.SINGLE?"tournament-brackets watermarked":"tournament-brackets single",children:getBrackets(tournament)})]});};var onNewTournamentClose=function onNewTournamentClose(){openNewTournamentModal(false);props.setForceRefresh(true);};var onEnterTournamentGameClose=function onEnterTournamentGameClose(){return openEnterGameModal(false);};var tournamentIsFinished=function tournamentIsFinished(tournament){if(tournament.type&&tournament.type===TournamentType.DOUBLE){return tournament.matches[13]&&tournament.matches[13].home_score!==undefined;}else if(tournament.type&&tournament.type===TournamentType.AFL){return tournament.matches[8]&&tournament.matches[8].home_score!==undefined;}else{return tournament.matches[6]&&tournament.matches[6].home_score!==undefined;}};var getRecapMatchLabels=function getRecapMatchLabels(match,winnerRank,loserRank){var labels=[];if(match.home_score!==undefined&&match.away_score!==undefined){if(match.home_score===0||match.away_score===0){labels.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Label["a" /* default */],{color:"red",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"tint"})," FATALITY"]}));}if(Math.abs(match.home_score-match.away_score)<5){labels.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Label["a" /* default */],{color:"yellow",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"bolt"})," THRILLER"]}));}if(winnerRank>loserRank){labels.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Label["a" /* default */],{color:"orange",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"exclamation"})," UPSET"]}));}if(match.home_score>21||match.away_score>21){labels.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])(Label["a" /* default */],{color:"grey",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"hourglass"})," MARATHON"]}));}}return labels;};var getMatchName=function getMatchName(match,tournamentType){switch(tournamentType){case TournamentType.SINGLE:switch(match.match_number){case 0:case 1:case 2:case 3:return"Quarter Final";case 4:case 5:return"Semi Final";case 6:return"Final";}break;case TournamentType.DOUBLE:return"Game "+(match.match_number+1).toString();case TournamentType.AFL:if(match.match_number===0)return"Qualifying Final 1";if(match.match_number===1)return"Elimination Final 1";if(match.match_number===2)return"Elimination Final 2";if(match.match_number===3)return"Qualifying Final 2";if(match.match_number===4)return"Semi Final 1";if(match.match_number===5)return"Semi Final 2";if(match.match_number===6)return"Preliminary Final 1";if(match.match_number===7)return"Preliminary Final 2";if(match.match_number===8)return"Grand Final";}return"";};var getRecapMatches=function getRecapMatches(){var recapMatches=[];recapMatches.push(/*#__PURE__*/Object(jsx_runtime["jsx"])("p",{className:"recap-match",children:sortedTournaments[0].name}));sortedTournaments[0].matches.forEach(function(match){// The scores should always be defined, because we've finished the tournament if we're showing a recap.
if(match.home_score!==undefined&&match.away_score!==undefined){var _playersMap$get7,_playersMap$get8,_sortedTournaments$0$;var _homeWon2=match.home_score>match.away_score;var winnerId=_homeWon2?match.home_player_id:match.away_player_id;var loserId=_homeWon2?match.away_player_id:match.home_player_id;var winnerName=(_playersMap$get7=playersMap.get(winnerId))===null||_playersMap$get7===void 0?void 0:_playersMap$get7.name;var loserName=(_playersMap$get8=playersMap.get(loserId))===null||_playersMap$get8===void 0?void 0:_playersMap$get8.name;var winnerScore=_homeWon2?match.home_score:match.away_score;var loserScore=_homeWon2?match.away_score:match.home_score;var winnerRank=getPlayerRank(sortedTournaments[0],winnerId);var loserRank=getPlayerRank(sortedTournaments[0],loserId);recapMatches.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("p",{className:"recap-match",children:[getMatchName(match,(_sortedTournaments$0$=sortedTournaments[0].type)!==null&&_sortedTournaments$0$!==void 0?_sortedTournaments$0$:TournamentType.SINGLE),/*#__PURE__*/Object(jsx_runtime["jsx"])("br",{}),"(",winnerRank,") ",winnerName," defeated (",loserRank,") ",loserName,", ",winnerScore,"-",loserScore,/*#__PURE__*/Object(jsx_runtime["jsx"])("br",{}),getRecapMatchLabels(match,winnerRank,loserRank)]}));}});recapMatches.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("p",{className:"recap-match",children:["Congratulations, ",getWinner(sortedTournaments[0]),"!"]}));return recapMatches;};var playPastTableAudio=function playPastTableAudio(){if(synth){arcadeAudioSynth.pause();pastTournamentsAudioSynth.play();}else{arcadeAudioVapour.pause();pastTournamentsAudioVapour.play();}};var playPastArcadeAudio=function playPastArcadeAudio(){if(synth){pastTournamentsAudioSynth.pause();arcadeAudioSynth.play();}else{pastTournamentsAudioVapour.pause();arcadeAudioVapour.play();}};var getPastWinners=function getPastWinners(tournaments){var pastWinners=[];tournaments.forEach(function(tournament){pastWinners.push(/*#__PURE__*/Object(jsx_runtime["jsx"])("p",{className:"past-winner",children:getWinner(tournament)}));});return pastWinners;};var getHighScoresTableRows=function getHighScoresTableRows(){var tableRows=[];var playerPointsWon=new Map();sortedTournaments.slice(1).forEach(function(tournament){tournament.matches.forEach(function(match){if(match.home_score!==undefined&&match.away_score!==undefined){if(playerPointsWon.has(match.home_player_id)){var _playerPointsWon$get;playerPointsWon.set(match.home_player_id,((_playerPointsWon$get=playerPointsWon.get(match.home_player_id))!==null&&_playerPointsWon$get!==void 0?_playerPointsWon$get:0)+match.home_score);}else{playerPointsWon.set(match.home_player_id,match.home_score);}if(playerPointsWon.has(match.away_player_id)){var _playerPointsWon$get2;playerPointsWon.set(match.away_player_id,((_playerPointsWon$get2=playerPointsWon.get(match.away_player_id))!==null&&_playerPointsWon$get2!==void 0?_playerPointsWon$get2:0)+match.away_score);}else{playerPointsWon.set(match.away_player_id,match.away_score);}}});});props.players.sort(function(p1,p2){var _p2$tournamentWins,_p1$tournamentWins,_playerPointsWon$get3,_playerPointsWon$get4;return((_p2$tournamentWins=p2.tournamentWins)!==null&&_p2$tournamentWins!==void 0?_p2$tournamentWins:0)-((_p1$tournamentWins=p1.tournamentWins)!==null&&_p1$tournamentWins!==void 0?_p1$tournamentWins:0)||((_playerPointsWon$get3=playerPointsWon.get(p2.id))!==null&&_playerPointsWon$get3!==void 0?_playerPointsWon$get3:0)-((_playerPointsWon$get4=playerPointsWon.get(p1.id))!==null&&_playerPointsWon$get4!==void 0?_playerPointsWon$get4:0);}).slice(0,synth?10:3).forEach(function(player){var _player$tournamentWin,_playerPointsWon$get5;tableRows.push(/*#__PURE__*/Object(jsx_runtime["jsxs"])("tr",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("td",{children:player.name}),/*#__PURE__*/Object(jsx_runtime["jsx"])("td",{children:(_player$tournamentWin=player.tournamentWins)!==null&&_player$tournamentWin!==void 0?_player$tournamentWin:0}),/*#__PURE__*/Object(jsx_runtime["jsx"])("td",{children:(_playerPointsWon$get5=playerPointsWon.get(player.id))!==null&&_playerPointsWon$get5!==void 0?_playerPointsWon$get5:0})]}));});return tableRows;};if(!((_props$chosenInstance=props.chosenInstance)===null||_props$chosenInstance===void 0?void 0:_props$chosenInstance.tournaments)){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Message["a" /* default */],{error:true,children:"Tournaments are currently disabled in this instance. Contact your administrator to find out more."})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[sortedTournaments.length>0&&tournamentIsFinished(sortedTournaments[0])?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"congrats-div",children:["Congratulations ",getWinner(sortedTournaments[0]),"!"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"new-tournament-div",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){openRecapModal(true);recapAudio.play();},id:"recapButton",children:"View tournament recap"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return openNewTournamentModal(true);},className:"new-tournament-button",children:"Start new tournament?"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){openRecapModal(false);recapAudio.pause();recapAudio.currentTime=0;},open:recapModalOpen,id:"recapModal",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Header,{children:"Tournament recap"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:getRecapMatches()})})]})]}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{}),sortedTournaments.length>0&&sortedTournaments[0].matches.length>0?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"tournament-details",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Header["a" /* default */],{content:/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{children:[sortedTournaments[0].name,/*#__PURE__*/Object(jsx_runtime["jsx"])(Label["a" /* default */],{color:"orange",children:((_sortedTournaments$0$2=sortedTournaments[0].participants)!==null&&_sortedTournaments$0$2!==void 0?_sortedTournaments$0$2:TournamentParticipantsType.STANDARD).toUpperCase()}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Label["a" /* default */],{color:"orange",children:((_sortedTournaments$0$3=sortedTournaments[0].type)!==null&&_sortedTournaments$0$3!==void 0?_sortedTournaments$0$3:TournamentType.SINGLE).toUpperCase()})]}),subheader:"Start date: "+sortedTournaments[0].start_date})}),renderTournament(sortedTournaments[0]),/*#__PURE__*/Object(jsx_runtime["jsx"])(Message["a" /* default */],{id:"rulesMsg",icon:"warning sign",header:"Remember the tournament rules!",content:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"rules-content-wrapper",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:"Play to 21, and you must win by 2!"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:"Swap sides when the total score adds up to 20!"})]})})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Button["a" /* default */],{onClick:function onClick(){openViewPastModal(true);if(synth&&pastTournamentView==="table"){pastTournamentsAudioSynth.play();}else if(synth){arcadeAudioSynth.play();}else if(pastTournamentView==="table"){pastTournamentsAudioVapour.play();}else{arcadeAudioVapour.play();}},id:synth?"pastTournamentsButtonSynth":"pastTournamentsButtonVapour",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"backward"}),"View past tournaments ",/*#__PURE__*/Object(jsx_runtime["jsx"])(Icon["a" /* default */],{name:"music"})]})]}):/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"new-tournament-div",children:!props.loading?/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{onClick:function onClick(){return openNewTournamentModal(true);},className:"new-tournament-button",children:"Start new tournament!"}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Tournament_NewTournament_NewTournament,{onClose:onNewTournamentClose,isOpen:newTournamentModalOpen,sortedPlayers:sortedPlayers}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Tournament_EnterTournamentGame_EnterTournamentGame,{onClose:onEnterTournamentGameClose,isOpen:enterGameModalOpen,refresh:function refresh(){return props.setForceRefresh(true);},matchEntering:matchEntering,currentTournament:sortedTournaments[0],homePlayerEntering:homePlayerEntering,awayPlayerEntering:awayPlayerEntering,playersMap:playersMap}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){openViewPastModal(false);pastTournamentsAudioSynth.pause();pastTournamentsAudioVapour.pause();arcadeAudioSynth.pause();arcadeAudioVapour.pause();},open:viewPastModalOpen,id:synth?"pastTournamentsModalSynth":"pastTournamentsModalVapour",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Header,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:"Past tournaments"}),synth?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{id:"pastModalButtons",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{active:pastTournamentView==="table",onClick:function onClick(){setPastTournamentView("table");playPastTableAudio();},color:"orange",children:"Table"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{active:pastTournamentView==="winners",onClick:function onClick(){setPastTournamentView("winners");playPastArcadeAudio();},color:"orange",children:"Winners"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{active:pastTournamentView==="high-scores",onClick:function onClick(){setPastTournamentView("high-scores");playPastArcadeAudio();},color:"orange",children:"High Scores"})]}):/*#__PURE__*/Object(jsx_runtime["jsx"])(Dropdown["a" /* default */],{id:"pastModalDropdown",onChange:function onChange(e,_ref){var value=_ref.value;setPastTournamentView(value);if(value==="table")playPastTableAudio();else playPastArcadeAudio();},options:[{text:"Table",value:"table"},{text:"Winners",value:"winners"},{text:"High Scores",value:"high-scores"}],value:pastTournamentView})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */].Content,{children:[pastTournamentView==="table"?/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */],{id:synth?"pastTournamentsTableSynth":"pastTournamentsTableVapour",color:synth?"orange":"pink",inverted:true,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Header,{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(Table["a" /* default */].Row,{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Tournament name"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Tournament participants"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Tournament type"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Start date"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"End date"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].HeaderCell,{children:"Winner"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Table["a" /* default */].Body,{children:getPastTournamentsTableRows(sortedTournaments.slice(1))})]}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{}),pastTournamentView==="winners"?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{id:synth?"pastWinnersSynth":"pastWinnersVapour",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{id:"pastWinnersTitle",children:"10 MOST RECENT TOURNAMENT WINNERS"}),getPastWinners(sortedTournaments.slice(1,11))]}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{}),pastTournamentView==="high-scores"?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{id:synth?"highScoresSynth":"highScoresVapour",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{id:"highScoresTitle",children:["TOURNAMENT HIGH SCORES TOP ",synth?10:3]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("table",{id:"highScoresTable",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("tr",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("th",{children:synth?"Player name":"Name"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("th",{children:synth?"Tournament wins":"Tourn. Ws"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("th",{children:synth?"Points won":"Pts won"})]}),getHighScoresTableRows()]})]}):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Button["a" /* default */],{id:synth?"vapourToggle":"synthToggle",onClick:function onClick(){if(synth&&pastTournamentView==="table"){pastTournamentsAudioSynth.pause();pastTournamentsAudioVapour.play();}else if(synth){arcadeAudioSynth.pause();arcadeAudioVapour.play();}else if(pastTournamentView==="table"){pastTournamentsAudioVapour.pause();pastTournamentsAudioSynth.play();}else{arcadeAudioVapour.pause();arcadeAudioSynth.play();}setSynth(!synth);},children:synth?"Change to Vapour":"Change to Synth"})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(Modal["a" /* default */],{closeIcon:true,onClose:function onClose(){return openSecondPastModal(false);},open:secondPastModalOpen,id:synth?"secondPastTournamentsModalSynth":"secondPastTournamentsModalVapour",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Header,{children:pastTournamentBeingViewed===null||pastTournamentBeingViewed===void 0?void 0:pastTournamentBeingViewed.name}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Modal["a" /* default */].Content,{children:pastTournamentBeingViewed?renderTournament(pastTournamentBeingViewed):/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{})})]})]})]});}var Tournament_getISODate=function getISODate(){var startDateWrongFormat=getTodaysDate();return"".concat(startDateWrongFormat.slice(6,10),"-").concat(startDateWrongFormat.slice(3,5),"-").concat(startDateWrongFormat.slice(0,2));};/* harmony default export */ var components_Tournament_Tournament = (Tournament_Tournament);
// CONCATENATED MODULE: ./src/containers/Tournament/Tournament.ts
function Tournament_mapStateToProps(store){return{loading:store.ttData.loading,players:store.ttData.players,matches:store.ttData.matches,refresh:store.ttData.refresh,happyHour:store.ttData.happyHour,badges:store.ttData.badges,tournaments:store.ttData.tournaments,disableMusic:store.viewStore.disableMusic,chosenInstance:store.authStore.chosenInstance};}/* harmony default export */ var containers_Tournament_Tournament = (Object(es["b" /* connect */])(Tournament_mapStateToProps,mapTTDispatchToProps)(components_Tournament_Tournament));
// CONCATENATED MODULE: ./src/App.tsx
function App_App(){return/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["a" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"app",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(containers_QHDataLoader_QHDataLoader,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_Navbar_Navbar,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"app-main-content",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router["d" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.HOME),component:containers_Home_Home}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.LADDER),component:containers_Ladder_Ladder}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.TOURNAMENT),component:containers_Tournament_Tournament}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.RECENT_GAMES),component:containers_RecentGames_RecentGames}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.STATISTICS),component:containers_PlayerStatistics_PlayerStatistics}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:"".concat(BASE_PATH()).concat(QuickHitPage.NOT_FOUND),component:NotFound_NotFound}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{exact:true,path:BASE_PATH(),component:containers_Home_Home}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{to:"".concat(BASE_PATH()).concat(QuickHitPage.NOT_FOUND)})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(Toast_Toast,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_Footer_Footer,{})]})});}/* harmony default export */ var src_App = (App_App);
// EXTERNAL MODULE: ./node_modules/javascript-time-ago/modules/TimeAgo.js + 33 modules
var TimeAgo = __webpack_require__(765);

// EXTERNAL MODULE: ./node_modules/javascript-time-ago/locale/en.json
var en = __webpack_require__(480);

// EXTERNAL MODULE: ./node_modules/redux-persist/es/persistStore.js
var persistStore = __webpack_require__(324);

// EXTERNAL MODULE: ./node_modules/redux-persist/es/integration/react.js
var integration_react = __webpack_require__(479);

// CONCATENATED MODULE: ./src/index.tsx
TimeAgo["a" /* default */].addDefaultLocale(en);var persistor=Object(persistStore["a" /* default */])(types_store);var FB_ANALYTICS_UA="UA-196115464-1";esm["a" /* default */].initialize(FB_ANALYTICS_UA,{redactEmail:false});react_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime["jsx"])(es["a" /* Provider */],{store:types_store,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(integration_react["a" /* PersistGate */],{persistor:persistor,loading:null,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(src_App,{})})})}),document.getElementById("root"));// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA

/***/ })

},[[696,1,2]]]);
//# sourceMappingURL=main.c549d793.chunk.js.map